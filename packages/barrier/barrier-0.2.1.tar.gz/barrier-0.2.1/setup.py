# -*- coding: utf-8 -*-
from distutils.core import setup

packages = \
['barrier']

package_data = \
{'': ['*']}

install_requires = \
['Flask>=1.1,<2.0',
 'flask-oidc>=1.4,<2.0',
 'gunicorn>=19.9,<20.0',
 'poetry-version>=0.1.3,<0.2.0']

entry_points = \
{'console_scripts': ['barrier-config = barrier.configure:main',
                     'barrier-dev = barrier.app:app.run',
                     'barrier-wsgi = barrier.wsgi:main']}

setup_kwargs = {
    'name': 'barrier',
    'version': '0.2.1',
    'description': 'Serve static files safely behind OpenIDConnect-compatible authentication (i.e. Okta)',
    'long_description': 'Barrier\n=======\n\nServe static files safely behind OpenIDConnect-compatible authentication (i.e. Okta)\n\nOpenID Connect Provider Set-up\n------------------------------\n\nOkta\n~~~~\n\nThe following steps will get you the values necessary to integrate Okta with your Barrier-protected content.\n\n#.  Go to the **Applications** section of your Okta admin app. (hint: the url of the admin app is ``https://<your organization>>-admin.okta.com/dev/console``)\n#.  Click **Add Application**\n#.  On the **Create New Application** page, choose **Web** and click **Next**\n#.  You will need to enter some details about the application:\n\n    *  Name: ``<your barrier-protected site name>``\n\n    *  Base URIs: ``https://<your barrier-protected domain>/``\n        *  or ``http://localhost:8000`` during development)\n\n    *  Login redirect URIs: ``https://<your barrier-protected domain>/oidc/callback``\n        *  or ``http://localhost:8000/oidc/callback``, & ``http://localhost:5000/oidc/callback`` during development\n\n    *  Group Assigments: **Everyone** is fine, unless you have specific requirements.\n\n    *  Grant Type Allowed:\n        *  Client acting on behalf of itself\n            *  ``[ ]`` Client Credentials\n        *  Client acting on behalf of a user\n            *  ``[x]`` Authorization Code\n            *  ``[ ]`` Refresh Token\n            *  ``[ ]`` Implicit (Hybrid)\n\n#.  Click **Next** again\n#.  You\'re now at the General Settings for your new Okta integration, scroll to the bottom and copy the **Client ID** and **Client secret** values.\n#.  Visit the **Dashboard** page and copy the **Org URL**.\n#.  Use the following guide to set your environment variables [1]_ :\n\n    *  ``BARRIER_CLIENT_ID`` = **Client ID**\n    *  ``BARRIER_CLIENT_SECRET`` = **Client secret**\n    *  ``BARRIER_AUTH_URI`` = ``<Org URL>/oauth2/default/v1/authorize``\n    *  ``BARRIER_TOKEN_URI`` = ``<Org URL>/oauth2/default/v1/token``\n    *  ``BARRIER_ISSUER`` = ``<Org URL>/oauth2/default``\n    *  ``BARRIER_USERINFO_URI`` = ``<Org URL>/oauth2/default/userinfo``\n\n#. Congratulations! You\'re ready to install or deploy!\n\nInstallation\n------------\n\n.. code::\n\n    $ pip install (--user) https://github.com/gadventures/barrier\n\nCommands\n--------\n\nThe following is a brief overview, but you can call any of these commands with ``--help`` for more information.\n\n``barrier-config``\n    Generate "client-secrets.json", required for running the other commands. See the help text for required options. Options passed on the command line will override any values set in the environment.\n``barrier-dev``\n    Flask development server. Useful if extending this project to add more features.\n``barrier-wsgi``\n    Gunicorn WSGI wrapper. Can be placed behind nginx, Apache, or whatever you like.\n\nEnvironment\n-----------\n\nRequired\n~~~~~~~~\n\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n| Name                        | Description                                                     | Where to get it                                                                           |\n+=============================+=================================================================+===========================================================================================+\n| ``BARRIER_USERINFO_URI``    | UserInfo URI. Part of OpenIDConnect secrets configuration.      | OpenID Connect Provider                                                                   |\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n| ``BARRIER_ISSUER``          | Issuer ID. Part of OpenIDConnect secrets configuration.         | OpenID Connect Provider                                                                   |\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n| ``BARRIER_TOKEN_URI``       | Token URI. Part of OpenIDConnect secrets configuration.         | OpenID Connect Provider                                                                   |\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n| ``BARRIER_AUTH_URI``        | Auth URI. Part of OpenIDConnect secrets configuration.          | OpenID Connect Provider                                                                   |\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n| ``BARRIER_CLIENT_SECRET``   | Client Secret Key. Part of OpenIDConnect secrets configuration. | OpenID Connect Provider                                                                   |\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n| ``BARRIER_CLIENT_ID``       | Client ID. Part of OpenIDConnect secrets configuration.         | OpenID Connect Provider                                                                   |\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n| ``BARRIER_REDIRECT_URI``    | Redirect URI. Part of OpenIDConnect secrets configuration.      | OpenID Connect Provider, The value to set is: ``https://{your-hostname}/oidc/callback``   |\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n| ``BARRIER_SECRET_KEY``      | Used for HMAC Authentication. Generate a long random string.    | Any source of random information                                                          |\n+-----------------------------+-----------------------------------------------------------------+-------------------------------------------------------------------------------------------+\n\nOptional\n~~~~~~~~\n\n+--------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------+\n| Name                           | Description                                                                                                                                                                                                    | Where to get it                                                                                                |\n+================================+================================================================================================================================================================================================================+================================================================================================================+\n| ``BARRIER_RESOURCE_ROOT``      | Root path of static files to serve. (Default: ``./build/html``)                                                                                                                                                  | Wherever you choose to add the static files in your custom layer, or add your files to the default location. |\n+--------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------+\n| ``BARRIER_DEFAULT_RESOURCE``   | The file/path that users will be redirected to after login. (Default: ``index.html``)                                                                                                                          | Probably not necessary to change this.                                                                         |\n+--------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------+\n| ``BARRIER_CLIENT_SECRETS``     | OpenIDConnect secrets configuration file location. If your provider allows automatic configuration download and has a different filename, override with that filename here. (Default: ``client-secrets.json``) | OpenID Connect Provider                                                                                        |\n+--------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------+\n\n\n.. [1] https://developer.okta.com/blog/2018/07/12/flask-tutorial-simple-user-registration-and-login#step-1-create-an-openid-connect-config-file\n',
    'author': 'Matthew de Verteuil',
    'author_email': 'mdeverteuil@gadventures.com',
    'url': 'https://github.com/gadventures/barrier',
    'packages': packages,
    'package_data': package_data,
    'install_requires': install_requires,
    'entry_points': entry_points,
    'python_requires': '>=3.7,<4.0',
}


setup(**setup_kwargs)
