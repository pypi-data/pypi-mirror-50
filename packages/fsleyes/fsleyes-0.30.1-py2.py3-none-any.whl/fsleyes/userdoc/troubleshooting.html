

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Troubleshooting &mdash; FSLeyes 0.30.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="fsleyes release history" href="changelog.html" />
    <link rel="prev" title="FSLeyes plugins" href="plugins.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> FSLeyes
          

          
          </a>

          
            
            
              <div class="version">
                0.30.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installing FSLeyes</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick_start.html">Quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overlays.html">Overlays</a></li>
<li class="toctree-l1"><a class="reference internal" href="ortho_lightbox_views.html">Orthographic/lightbox views</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot_views.html">Plotting views</a></li>
<li class="toctree-l1"><a class="reference internal" href="3d_view.html">3D view</a></li>
<li class="toctree-l1"><a class="reference internal" href="atlases.html">Atlases</a></li>
<li class="toctree-l1"><a class="reference internal" href="editing_images.html">Editing NIFTI images</a></li>
<li class="toctree-l1"><a class="reference internal" href="feat_mode.html">Viewing FEAT analyses</a></li>
<li class="toctree-l1"><a class="reference internal" href="ic_classification.html">IC classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="fsleyes_notebook.html">FSLeyes and Jupyter Notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="display_space.html">The display space</a></li>
<li class="toctree-l1"><a class="reference internal" href="customising.html">Customising FSLeyes</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">FSLeyes plugins</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fsldir-is-not-set"><code class="docutils literal notranslate"><span class="pre">$FSLDIR</span></code> is not set</a></li>
<li class="toctree-l2"><a class="reference internal" href="#fsleyes-has-saved-the-wrong-fsldir">FSLeyes has saved the wrong <code class="docutils literal notranslate"><span class="pre">$FSLDIR</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#images-are-not-overlaid-on-each-other-correctly">Images are not overlaid on each other correctly</a></li>
<li class="toctree-l2"><a class="reference internal" href="#my-image-is-tilted-oblique-how-do-i-make-it-oriented-rectangular">My image is tilted/oblique! How do I make it oriented/rectangular?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#there-are-weird-striping-artifacts-in-my-image">There are weird striping artifacts in my image!</a></li>
<li class="toctree-l2"><a class="reference internal" href="#movie-mode-gives-me-a-black-flickering-screen">Movie mode gives me a black/flickering screen</a></li>
<li class="toctree-l2"><a class="reference internal" href="#line-vectors-tensors-fibre-orientation-distributions-are-left-right-flipped">Line vectors/tensors/fibre orientation distributions are left/right flipped</a></li>
<li class="toctree-l2"><a class="reference internal" href="#osx-keyboard-navigation-doesn-t-work-in-the-ic-classification-panel">OSX - Keyboard navigation doesn’t work in the IC classification panel</a></li>
<li class="toctree-l2"><a class="reference internal" href="#osx-fsleyes-breaks-after-updating">OSX - FSLeyes breaks after updating</a></li>
<li class="toctree-l2"><a class="reference internal" href="#linux-fsleyes-does-not-start">Linux - FSLeyes does not start</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#glutinit"><code class="docutils literal notranslate"><span class="pre">glutInit</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#libxcb"><code class="docutils literal notranslate"><span class="pre">libxcb</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#glib-version-too-old-micro-mismatch"><code class="docutils literal notranslate"><span class="pre">GLib</span> <span class="pre">version</span> <span class="pre">too</span> <span class="pre">old</span> <span class="pre">(micro</span> <span class="pre">mismatch)</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-fsleyes-remotely">Running FSLeyes remotely</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#opengl-1-4-or-newer-is-required-detected-version-1-2">OpenGL 1.4 or newer is required (detected version: 1.2)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#options-are-missing">Options are missing!</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xquartz-fsleyes-doesn-t-start-and-just-shows-an-error">XQuartz - FSLeyes doesn’t start, and just shows an error</a></li>
<li class="toctree-l3"><a class="reference internal" href="#xquartz-keyboard-shortcuts-don-t-work">XQuartz - keyboard shortcuts don’t work</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html"><code class="docutils literal notranslate"><span class="pre">fsleyes</span></code> release history</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">FSLeyes</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Troubleshooting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/troubleshooting.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="troubleshooting">
<span id="id1"></span><h1>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h1>
<p>This page describes some problems which you may encounter when using FSLeyes.
If you are having a problem which is not listed here, try searching the <a class="reference external" href="https://www.jiscmail.ac.uk/cgi-bin/webadmin?A0=FSL">FSL
mailing list</a> archives
to see if somebody else has had the same problem. Failing that, send an email
to the mailing list - we will try our best to help!</p>
<div class="section" id="fsldir-is-not-set">
<h2><code class="docutils literal notranslate"><span class="pre">$FSLDIR</span></code> is not set<a class="headerlink" href="#fsldir-is-not-set" title="Permalink to this headline">¶</a></h2>
<p>When you first start FSLeyes, you may be presented with the following warning:</p>
<a class="reference internal image-reference" href="_images/troubleshooting_fsldir_not_set.png"><img alt="_images/troubleshooting_fsldir_not_set.png" class="align-center" src="_images/troubleshooting_fsldir_not_set.png" style="width: 70%;" /></a>
<p>This means that FSLeyes has been unable to locate the directory in which FSL
is installed, and may mean that your FSL environment is not correctly
configured. If you see this warning, you can tell FSLeyes where FSL is located
by clicking on the <strong>Locate $FSLDIR</strong> button, and selecting the FSL
installation directory (typically <code class="docutils literal notranslate"><span class="pre">/usr/local/fsl/</span></code>).  Alternately, you can
click <strong>Skip</strong> to ignore the warning- you can still use FSLeyes, however some
features (e.g. atlases) will not be available.</p>
</div>
<div class="section" id="fsleyes-has-saved-the-wrong-fsldir">
<h2>FSLeyes has saved the wrong <code class="docutils literal notranslate"><span class="pre">$FSLDIR</span></code><a class="headerlink" href="#fsleyes-has-saved-the-wrong-fsldir" title="Permalink to this headline">¶</a></h2>
<p>FSLeyes keeps track of the location that it thinks FSL is installed in.  If
you move or re-install FSL, or have multiple versions of FSL installed, and
need to update FSLeyes, you can force FSLeyes to forget its settings via the
<em>FSLeyes</em> ⇒ <em>Clear FSLeyes settings</em> menu option.</p>
</div>
<div class="section" id="images-are-not-overlaid-on-each-other-correctly">
<h2>Images are not overlaid on each other correctly<a class="headerlink" href="#images-are-not-overlaid-on-each-other-correctly" title="Permalink to this headline">¶</a></h2>
<p>Sometimes when you load some images into FSLeyes, they will be displayed
incorrectly - either badly oriented, or mis-aligned:</p>
<a class="reference internal image-reference" href="_images/troubleshooting_misaligned.png"><img alt="_images/troubleshooting_misaligned.png" class="align-center" src="_images/troubleshooting_misaligned.png" style="width: 80%;" /></a>
<a class="reference internal image-reference" href="_images/troubleshooting_bad_orientation.png"><img alt="_images/troubleshooting_bad_orientation.png" class="align-center" src="_images/troubleshooting_bad_orientation.png" style="width: 80%;" /></a>
<p>This can mean one of two things:</p>
<ol class="arabic simple">
<li><p>The images are not aligned, and they are not supposed to be (the top
example above). For example, they are from different subjects, modalities,
or studies.</p></li>
<li><p>The images should be aligned, but there is an error in the orientation
information stored in the NIFTI header, for one (or several) of the images
(the bottom example above).</p></li>
</ol>
<p>The first scenario is not a problem - you can safely load and view data from
different subjects and studies into FSLeyes, but be aware that there will be
no anatomical correspondence, across the different images, in the world or
voxel coordinates.</p>
<p>The second scenario is more serious, as it means that the orientation
information for one or more images has somehow been corrupted.  The
<a class="reference internal" href="overlays.html#overlays-overlay-information-panel"><span class="std std-ref">overlay information panel</span></a> is
useful here, as it allows you to check the orientation information of each
images, including the <code class="docutils literal notranslate"><span class="pre">sform</span></code> and <code class="docutils literal notranslate"><span class="pre">qform</span></code> codes and transformation
matrices, and the voxel and world coordinate orientations.</p>
<p>Once you identify the image(s) which is/are causing the problem, you need to
re-generate the image (if it was generated as part of a processing pipeline),
or correct the orientation information in the NIFTI file header. In the
future, you will be able to do this from within FSLeyes, but as of version
0.30.1, you must do this with an external program such as <code class="docutils literal notranslate"><span class="pre">fslcpgeom</span></code> or
<code class="docutils literal notranslate"><span class="pre">fsledithd</span></code>.</p>
</div>
<div class="section" id="my-image-is-tilted-oblique-how-do-i-make-it-oriented-rectangular">
<h2>My image is tilted/oblique! How do I make it oriented/rectangular?<a class="headerlink" href="#my-image-is-tilted-oblique-how-do-i-make-it-oriented-rectangular" title="Permalink to this headline">¶</a></h2>
<p>Open the <a class="reference internal" href="ortho_lightbox_views.html#ortho-lightbox-views-view-settings"><span class="std std-ref">view settings panel</span></a> (the
<img alt="spanner_icon" src="_images/spanner_icon.png" /> button) and set the <em>Display space</em> to the image which you want
oriented.</p>
</div>
<div class="section" id="there-are-weird-striping-artifacts-in-my-image">
<h2>There are weird striping artifacts in my image!<a class="headerlink" href="#there-are-weird-striping-artifacts-in-my-image" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/troubleshooting_striping.png"><img alt="_images/troubleshooting_striping.png" class="align-right" src="_images/troubleshooting_striping.png" style="width: 10%;" /></a>
<p>Those are slice boundaries - your image is being displayed obliquely to the
display, and FSLeyes is using nearest-neighbour interpolation to draw the
image to the screen. Change the interpolation (in the <a class="reference internal" href="overlays.html#overlays-overlay-display-panel"><span class="std std-ref">overlay display
panel</span></a>) to <em>linear</em> or <em>spline</em>.</p>
</div>
<div class="section" id="movie-mode-gives-me-a-black-flickering-screen">
<h2>Movie mode gives me a black/flickering screen<a class="headerlink" href="#movie-mode-gives-me-a-black-flickering-screen" title="Permalink to this headline">¶</a></h2>
<p>Try changing the <strong>Synchronise movie updates</strong> setting, in the view settings
panel (the <img alt="spanner_icon" src="_images/spanner_icon.png" /> button).</p>
</div>
<div class="section" id="line-vectors-tensors-fibre-orientation-distributions-are-left-right-flipped">
<span id="troubleshooting-vector-orientation"></span><h2>Line vectors/tensors/fibre orientation distributions are left/right flipped<a class="headerlink" href="#line-vectors-tensors-fibre-orientation-distributions-are-left-right-flipped" title="Permalink to this headline">¶</a></h2>
<p>Occasionally you might load a <a class="reference internal" href="overlays.html#overlays-vector"><span class="std std-ref">vector</span></a> image (or
<a class="reference internal" href="overlays.html#overlays-tensor"><span class="std std-ref">tensor</span></a> or <a class="reference internal" href="overlays.html#overlays-diffusion-sh"><span class="std std-ref">SH</span></a> image)
into FSLeyes, only to find that the orientation of the vectors is incorrectly
inverted along the left-right axis. This can occur because different software
tools may output vector image data in different ways, depending on the image
orientation.</p>
<a class="reference internal image-reference" href="_images/troubleshooting_line_vector_orientation.png"><img alt="_images/troubleshooting_line_vector_orientation.png" class="align-right" src="_images/troubleshooting_line_vector_orientation.png" style="width: 40%;" /></a>
<p>For images which are stored radiologically (with the X axis in the voxel
coordinate system increasing from right to left, the top image), FSL tools
such as <a class="reference external" href="http://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FDT/UserGuide#DTIFIT">dtifit</a>
will generate vectors which are oriented according to the voxel coordinate
system.</p>
<p>However, for neurologically stored images (X axis increasing from left to
right), FSL tools generate vectors which are <em>radiologically</em> oriented (the
middle image), and thus are inverted with respect to the X axis in the voxel
coordinate system.  Therefore, in order to correctly display vectors from such
an image, we must flip each vector about the X axis (the bottom image).</p>
<p><a class="reference internal" href="overlays.html#overlays-vector"><span class="std std-ref">Vector</span></a> overlays have a <strong>L/R orientation flip</strong>
setting, which allows you to flip vectors (or tensor ellipsoids, or FODs)
along the left/right axis. FSLeyes will automatically adjust this setting
based on the orientation of the image data, and will correctly display all
vector images that have been generated by FSL tools.</p>
<p>However, if you are working with vector (or <a class="reference internal" href="overlays.html#overlays-tensor"><span class="std std-ref">tensor</span></a>,
or <a class="reference internal" href="overlays.html#overlays-diffusion-sh"><span class="std std-ref">SH</span></a>) data generated by a different tool, you
may need to flip the orientation, via the <strong>L/R orientation flip</strong> setting in
the <a class="reference internal" href="overlays.html#overlays-overlay-display-panel"><span class="std std-ref">overlay display panel</span></a>, in order to
display the data correctly.</p>
</div>
<div class="section" id="osx-keyboard-navigation-doesn-t-work-in-the-ic-classification-panel">
<span id="troubleshooting-keyboard-navigation-doesnt-work-in-the-ic-classification-panel"></span><h2>OSX - Keyboard navigation doesn’t work in the IC classification panel<a class="headerlink" href="#osx-keyboard-navigation-doesn-t-work-in-the-ic-classification-panel" title="Permalink to this headline">¶</a></h2>
<p>Under OSX, you may have focus-related issues while navigating around the
<a class="reference internal" href="ic_classification.html#ic-classification-classifying-components-with-the-classification-panel"><span class="std std-ref">IC classification panel</span></a> with
the keyboard.</p>
<p>If this is happening to you, you may need to enable <em>Full keyboard access</em> for
the MELODIC classification panel to work with keyboard navigation/focus.  This
setting can be changed through <em>System Preferences</em> ⇒ <em>Keyboard</em>
⇒ <em>Shortcuts</em>, and changing <em>Full Keyboard Access</em> to <em>All
controls</em>.</p>
</div>
<div class="section" id="osx-fsleyes-breaks-after-updating">
<h2>OSX - FSLeyes breaks after updating<a class="headerlink" href="#osx-fsleyes-breaks-after-updating" title="Permalink to this headline">¶</a></h2>
<p>Under OSX, you may encounter the following error after overwriting an old
version of FSLeyes with a new version:</p>
<a class="reference internal image-reference" href="_images/troubleshooting_fsleyes_update_error.png"><img alt="_images/troubleshooting_fsleyes_update_error.png" class="align-center" src="_images/troubleshooting_fsleyes_update_error.png" style="width: 50%;" /></a>
<p>This is happening because OSX is caching the old version of the FSLeyes
application specification file (found in <code class="docutils literal notranslate"><span class="pre">FSLeyes.app/Contents/Info.plist</span></code>),
and ignoring the new version. You can fix this problem by temporarily moving
this file to a different location, and then moving it back again, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">Path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">FSLeyes</span><span class="o">.</span><span class="n">app</span>
<span class="n">mv</span> <span class="n">Contents</span><span class="o">/</span><span class="n">Info</span><span class="o">.</span><span class="n">plist</span> <span class="o">./</span><span class="n">Info</span><span class="o">.</span><span class="n">plist</span><span class="o">.</span><span class="n">backup</span>
<span class="c1"># This command will fail</span>
<span class="o">./</span><span class="n">Contents</span><span class="o">/</span><span class="n">MacOS</span><span class="o">/</span><span class="n">fsleyes</span>
<span class="n">mv</span> <span class="o">./</span><span class="n">Info</span><span class="o">.</span><span class="n">plist</span><span class="o">.</span><span class="n">backup</span> <span class="n">Contents</span><span class="o">/</span><span class="n">Info</span><span class="o">.</span><span class="n">plist</span>
<span class="c1"># FSLeyes should now work</span>
<span class="o">./</span><span class="n">Contents</span><span class="o">/</span><span class="n">MacOS</span><span class="o">/</span><span class="n">fsleyes</span>
</pre></div>
</div>
<p>If, after the above, the problem is still occurring, it may be that you are
using a symbolic link to call FSLeyes (e.g. a link called
<code class="docutils literal notranslate"><span class="pre">$FSLDIR/bin/fsleyes</span></code> which points to
<code class="docutils literal notranslate"><span class="pre">/Applications/FSLeyes.app/Contents/MacOS/fsleyes</span></code>. If this is the case,
try replacing the symlink with a wrapper script that contains the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#!/bin/bash
/path/to/FSLeyes.app/Contents/MacOS/fsleyes $@
</pre></div>
</div>
</div>
<div class="section" id="linux-fsleyes-does-not-start">
<h2>Linux - FSLeyes does not start<a class="headerlink" href="#linux-fsleyes-does-not-start" title="Permalink to this headline">¶</a></h2>
<div class="section" id="glutinit">
<h3><code class="docutils literal notranslate"><span class="pre">glutInit</span></code><a class="headerlink" href="#glutinit" title="Permalink to this headline">¶</a></h3>
<p>Under linux, you might be presented with the following error when you try to
start FSLeyes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WARNING</span>          <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>  <span class="mi">596</span><span class="p">:</span> <span class="n">create</span>          <span class="o">-</span> <span class="n">GLContext</span> <span class="n">callback</span> <span class="n">function</span> <span class="n">raised</span> <span class="n">NullFunctionError</span><span class="p">:</span> <span class="n">Attempt</span> <span class="n">to</span> <span class="n">call</span> <span class="n">an</span> <span class="n">undefined</span> <span class="n">function</span> <span class="n">glutInit</span><span class="p">,</span> <span class="n">check</span> <span class="k">for</span> <span class="nb">bool</span><span class="p">(</span><span class="n">glutInit</span><span class="p">)</span> <span class="n">before</span> <span class="n">calling</span>
<span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;fsleyes/gl/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">590</span><span class="p">,</span> <span class="ow">in</span> <span class="n">create</span>
  <span class="n">File</span> <span class="s2">&quot;fsleyes/main.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">371</span><span class="p">,</span> <span class="ow">in</span> <span class="n">realCallback</span>
  <span class="n">File</span> <span class="s2">&quot;fsleyes/gl/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">377</span><span class="p">,</span> <span class="ow">in</span> <span class="n">bootstrap</span>
  <span class="n">File</span> <span class="s2">&quot;site-packages/OpenGL/GLUT/special.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">333</span><span class="p">,</span> <span class="ow">in</span> <span class="n">glutInit</span>
  <span class="n">File</span> <span class="s2">&quot;site-packages/OpenGL/platform/baseplatform.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">407</span><span class="p">,</span> <span class="ow">in</span> <span class="fm">__call__</span>
<span class="n">NullFunctionError</span><span class="p">:</span> <span class="n">Attempt</span> <span class="n">to</span> <span class="n">call</span> <span class="n">an</span> <span class="n">undefined</span> <span class="n">function</span> <span class="n">glutInit</span><span class="p">,</span> <span class="n">check</span> <span class="k">for</span> <span class="nb">bool</span><span class="p">(</span><span class="n">glutInit</span><span class="p">)</span> <span class="n">before</span> <span class="n">calling</span>
</pre></div>
</div>
<p>This error is occurring because FSLeyes depends on some features provided by
[GLUT](<a class="reference external" href="https://www.opengl.org/resources/libraries/glut/">https://www.opengl.org/resources/libraries/glut/</a>), which is not
necessarily present on linux systems. You can avoid this error simply by
installing [FreeGLUT](<a class="reference external" href="http://freeglut.sourceforge.net/">http://freeglut.sourceforge.net/</a>), which should be
available through your package manager (e.g. <code class="docutils literal notranslate"><span class="pre">yum</span> <span class="pre">install</span> <span class="pre">freeglut</span></code> under
CentOS, or <code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">freeglut3</span></code> under Ubuntu).</p>
</div>
<div class="section" id="libxcb">
<h3><code class="docutils literal notranslate"><span class="pre">libxcb</span></code><a class="headerlink" href="#libxcb" title="Permalink to this headline">¶</a></h3>
<p>Another possible error which you may encounter when running on older Linux
platforms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="n">File</span> <span class="s2">&quot;fsleyes/__main__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">4</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;fsleyes/main.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">33</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;site-packages/wx-3.0-gtk2/wx/__init__.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">45</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
  <span class="n">File</span> <span class="s2">&quot;site-packages/wx-3.0-gtk2/wx/_core.py&quot;</span><span class="p">,</span> <span class="n">line</span> <span class="mi">4</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">ImportError</span><span class="p">:</span> <span class="n">libX11</span><span class="o">.</span><span class="n">so</span><span class="o">.</span><span class="mi">6</span><span class="p">:</span> <span class="n">undefined</span> <span class="n">symbol</span><span class="p">:</span> <span class="n">xcb_wait_for_reply64</span>
<span class="n">Failed</span> <span class="n">to</span> <span class="n">execute</span> <span class="n">script</span> <span class="n">__main__</span>
</pre></div>
</div>
<p>This error is occurring because FSLeyes requires a more up-to-date version of
the <code class="docutils literal notranslate"><span class="pre">libxcb</span></code> library. You can solve this problem simply by upgrading
<code class="docutils literal notranslate"><span class="pre">libxcb</span></code>. Under CentOS, simply run <code class="docutils literal notranslate"><span class="pre">yum</span> <span class="pre">update</span> <span class="pre">libxcb</span></code> (with administrator
privileges).</p>
</div>
<div class="section" id="glib-version-too-old-micro-mismatch">
<h3><code class="docutils literal notranslate"><span class="pre">GLib</span> <span class="pre">version</span> <span class="pre">too</span> <span class="pre">old</span> <span class="pre">(micro</span> <span class="pre">mismatch)</span></code><a class="headerlink" href="#glib-version-too-old-micro-mismatch" title="Permalink to this headline">¶</a></h3>
<p>If you see an error that looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="n">fsleyes</span><span class="p">:</span><span class="mi">15552</span><span class="p">):</span> <span class="n">Gtk</span><span class="o">-</span><span class="n">WARNING</span> <span class="o">**</span><span class="p">:</span> <span class="n">GModule</span> <span class="p">(</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib64</span><span class="o">/</span><span class="n">gtk</span><span class="o">-</span><span class="mf">2.0</span><span class="o">/</span><span class="mf">2.10</span><span class="o">.</span><span class="mi">0</span><span class="o">/</span><span class="n">immodules</span><span class="o">/</span><span class="n">im</span><span class="o">-</span><span class="n">ibus</span><span class="o">.</span><span class="n">so</span><span class="p">)</span> <span class="n">initialization</span> <span class="n">check</span> <span class="n">failed</span><span class="p">:</span> <span class="n">GLib</span> <span class="n">version</span> <span class="n">too</span> <span class="n">old</span> <span class="p">(</span><span class="n">micro</span> <span class="n">mismatch</span><span class="p">)</span>
</pre></div>
</div>
<p>Then you are probably using a version of FSLeyes which has been built for a
different operating system (e.g. using a version of FSLeyes that has been
built for CentOS6 on a CentOS7 machine). Head to the <a class="reference external" href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FSLeyes">FSLeyes</a> home
page and follow the instructions to download the correct version for your
platform.</p>
</div>
</div>
<div class="section" id="running-fsleyes-remotely">
<h2>Running FSLeyes remotely<a class="headerlink" href="#running-fsleyes-remotely" title="Permalink to this headline">¶</a></h2>
<p>FSLeyes is capable of running on remote servers, over SSH/X11 connections, or
from within VNC or other remote desktop tools. However, you may need to
configure your environment before FSLeyes will work correctly.</p>
<div class="section" id="opengl-1-4-or-newer-is-required-detected-version-1-2">
<h3>OpenGL 1.4 or newer is required (detected version: 1.2)<a class="headerlink" href="#opengl-1-4-or-newer-is-required-detected-version-1-2" title="Permalink to this headline">¶</a></h3>
<p>FSLeyes requires OpenGL 1.4 or newer. In some remote desktop environments, the
OpenGL version may be restricted. If you receive this error when trying to
start FSLeyes, try the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unset</span> <span class="n">LIBGL_ALWAYS_INDIRECT</span>
<span class="n">fsleyes</span>
</pre></div>
</div>
<p>If you are running FSLeyes within a VNC session, you may need to force
software-based rendering:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">LIBGL_ALWAYS_SOFTWARE</span><span class="o">=</span><span class="mi">1</span>
<span class="n">fsleyes</span>
</pre></div>
</div>
</div>
<div class="section" id="options-are-missing">
<h3>Options are missing!<a class="headerlink" href="#options-are-missing" title="Permalink to this headline">¶</a></h3>
<p>Sometimes, in a remote desktop environment, FSLeyes is not able to provide all
of the features that it can when running locally. When you run FSLeyes over
X11, the following options will not be available:</p>
<blockquote>
<div><ul class="simple">
<li><p>Spline interpolation for <a class="reference internal" href="overlays.html#overlays-volume"><span class="std std-ref">volume</span></a> and <a class="reference internal" href="overlays.html#overlays-vector"><span class="std std-ref">RGB
vector</span></a> overlays</p></li>
<li><p><a class="reference internal" href="overlays.html#overlays-tensor"><span class="std std-ref">Tensor</span></a> display</p></li>
<li><p><a class="reference internal" href="overlays.html#overlays-diffusion-sh"><span class="std std-ref">Diffusion  SH</span></a> display</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="xquartz-fsleyes-doesn-t-start-and-just-shows-an-error">
<h3>XQuartz - FSLeyes doesn’t start, and just shows an error<a class="headerlink" href="#xquartz-fsleyes-doesn-t-start-and-just-shows-an-error" title="Permalink to this headline">¶</a></h3>
<p>Under XQuartz 2.7.9 and newer, FSLeyes may not start, and you may see the
following error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Gdk</span><span class="o">-</span><span class="n">ERROR</span> <span class="o">**</span><span class="p">:</span> <span class="n">The</span> <span class="n">program</span> <span class="s1">&#39;fsleyes&#39;</span> <span class="n">received</span> <span class="n">an</span> <span class="n">X</span> <span class="n">Window</span> <span class="n">System</span> <span class="n">error</span><span class="o">.</span>
<span class="n">This</span> <span class="n">probably</span> <span class="n">reflects</span> <span class="n">a</span> <span class="n">bug</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">program</span><span class="o">.</span>
<span class="n">The</span> <span class="n">error</span> <span class="n">was</span> <span class="s1">&#39;BadValue (integer parameter out of range for operation)&#39;</span><span class="o">.</span>
  <span class="p">(</span><span class="n">Details</span><span class="p">:</span> <span class="n">serial</span> <span class="mi">695</span> <span class="n">error_code</span> <span class="mi">2</span> <span class="n">request_code</span> <span class="mi">149</span> <span class="n">minor_code</span> <span class="mi">24</span><span class="p">)</span>
  <span class="p">(</span><span class="n">Note</span> <span class="n">to</span> <span class="n">programmers</span><span class="p">:</span> <span class="n">normally</span><span class="p">,</span> <span class="n">X</span> <span class="n">errors</span> <span class="n">are</span> <span class="n">reported</span> <span class="n">asynchronously</span><span class="p">;</span>
   <span class="n">that</span> <span class="ow">is</span><span class="p">,</span> <span class="n">you</span> <span class="n">will</span> <span class="n">receive</span> <span class="n">the</span> <span class="n">error</span> <span class="n">a</span> <span class="k">while</span> <span class="n">after</span> <span class="n">causing</span> <span class="n">it</span><span class="o">.</span>
   <span class="n">To</span> <span class="n">debug</span> <span class="n">your</span> <span class="n">program</span><span class="p">,</span> <span class="n">run</span> <span class="n">it</span> <span class="k">with</span> <span class="n">the</span> <span class="o">--</span><span class="n">sync</span> <span class="n">command</span> <span class="n">line</span>
   <span class="n">option</span> <span class="n">to</span> <span class="n">change</span> <span class="n">this</span> <span class="n">behavior</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">then</span> <span class="n">get</span> <span class="n">a</span> <span class="n">meaningful</span>
   <span class="n">backtrace</span> <span class="kn">from</span> <span class="nn">your</span> <span class="n">debugger</span> <span class="k">if</span> <span class="n">you</span> <span class="k">break</span> <span class="n">on</span> <span class="n">the</span> <span class="n">gdk_x_error</span><span class="p">()</span> <span class="n">function</span><span class="o">.</span><span class="p">)</span>
<span class="n">aborting</span><span class="o">...</span>
</pre></div>
</div>
<p>This is caused by a configuration issue with XQuartz - you will be unable to
run any OpenGL application, not just FSLeyes. Fortunately, there is a
solution: if you are using XQuartz 2.7.10 or newer, run this command (locally,
not within the SSH session):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">defaults</span> <span class="n">write</span> <span class="n">org</span><span class="o">.</span><span class="n">macosforge</span><span class="o">.</span><span class="n">xquartz</span><span class="o">.</span><span class="n">X11</span> <span class="n">enable_iglx</span> <span class="o">-</span><span class="nb">bool</span> <span class="n">true</span>
</pre></div>
</div>
<p>If you are using XQuartz 2.7.9, and you cannot upgrade to 2.7.10 or newer, you
will need to edit <code class="docutils literal notranslate"><span class="pre">/usr/X11R6/bin/startx</span></code> (you will probably need
administrator privileges). There is a section in this script, around line 100,
which configures a variable called <code class="docutils literal notranslate"><span class="pre">defaultserverargs</span></code>. Immediately after
this section, add the following line:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">defaultserverargs</span><span class="o">=</span><span class="s2">&quot;$defaultserverargs +iglx&quot;</span>
</pre></div>
</div>
<p>After making this change, restart XQuartz - FSLeyes should now start.</p>
</div>
<div class="section" id="xquartz-keyboard-shortcuts-don-t-work">
<h3>XQuartz - keyboard shortcuts don’t work<a class="headerlink" href="#xquartz-keyboard-shortcuts-don-t-work" title="Permalink to this headline">¶</a></h3>
<p>If you are using XQuartz, you may need to select the <em>Option keys send Alt_L
and Alt_R</em> option in the XQuartz Preferences dialog before keyboard shortcuts
will work in FSLeyes.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="changelog.html" class="btn btn-neutral float-right" title="fsleyes release history" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="plugins.html" class="btn btn-neutral float-left" title="FSLeyes plugins" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Paul McCarthy, University of Oxford, Oxford, UK

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>