(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(47)},47:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),o=n.n(i),s=n(50),c=n(16),l=(n(41),n(11)),u=n(27),f=n(2),h=n.n(f);var m={query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return t.query;case"CLEAR_QUERY":return"";default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":return t.data;case"CLEAR_DATA":return{};default:return e}}},p=Object(l.c)(m);var v=function(){try{var e=localStorage.getItem("state");return null===e?void 0:JSON.parse(e)}catch(e){return}}(),d=l.d,y=Object(l.e)(p,v,d(Object(l.a)(u.a)));y.subscribe(h.a.throttle(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(e){}}(y.getState())},1e3));var b=y,g=n(22),E=n(48),w=n(51),S=n(29),k=n(49),C=n(1),N=n.n(C);function O(e){return{type:"SET_DATA",data:e}}function x(e,t){return function(n){var a={value:e};return t?(a.filter_list=t,fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return n(O(e))})):fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return n(O(e))})}}var j=n(17),T=n.n(j);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function D(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=D(this,R(t).call(this,e))).state={value:"",error:!1},n.fileInput=r.a.createRef(),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,r.a.Component),n=t,(a=[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.value;this.props.getSungear(n).then(function(){t.props.setQuery(n),t.props.history.push("/sungear")}).catch(function(){t.setState({error:!0})})}},{key:"handleChange",value:function(e){this.setState({value:e.target.value,error:!1})}},{key:"handleDrop",value:function(e){var t;if(e.preventDefault(),e.dataTransfer.items){var n=!0,a=!1,r=void 0;try{for(var i,o=e.dataTransfer.items[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if("file"===s.kind){t=s.getAsFile();break}}}catch(e){a=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}}else t=e.dataTransfer.files[0];t?this.handleFile(t):this.setState({value:e.dataTransfer.getData("text/plain"),error:!1})}},{key:"handleDragOver",value:function(e){e.preventDefault()}},{key:"handleDragEnter",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleFileInput",value:function(e){e.target.files&&this.handleFile(e.target.files[0])}},{key:"handleUploadClick",value:function(e){this.fileInput.current.click()}},{key:"handleFile",value:function(e){var t=this,n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(e){t.setState({value:e.target.result,error:!1})}}},{key:"clear",value:function(){this.setState({value:"",error:!1})}},{key:"render",value:function(){var e=this.state.error;return r.a.createElement("div",{className:"jumbotron bg-white"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",{className:"display-4"},"Sungear"),r.a.createElement("p",{className:"lead"},"Visualize Overlapping Lists!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group",onDragEnter:this.handleDragEnter.bind(this),onDragOver:this.handleDragOver.bind(this),onDrop:this.handleDrop.bind(this)},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:this.handleUploadClick.bind(this)},"Upload")),r.a.createElement("textarea",{className:T()("form-control",e&&"is-invalid"),placeholder:"Input Lists Here",rows:5,onChange:this.handleChange.bind(this),value:this.state.value}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:this.clear.bind(this)},"Clear"),r.a.createElement("button",{className:"btn btn-primary"},"Submit"))),r.a.createElement("small",{className:"form-text text-muted"},"You can also drag and drop text files.")),r.a.createElement("input",{type:"file",hidden:!0,ref:this.fileInput,onChange:this.handleFileInput.bind(this)}))))))}}])&&P(n.prototype,a),i&&P(n,i),t}();A.propTypes={getSungear:N.a.func,setQuery:N.a.func,history:N.a.object};var z=Object(c.b)(null,{getSungear:x,setQuery:function(e){return{type:"SET_QUERY",query:e}}})(A),F=n(7),L=n(28),M=n.n(L),U=n(30);function Y(e){return new RegExp("^"+h.a.escapeRegExp(e),"i")}var B=n(15),q=n(8);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function V(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function W(e,t){return Q(e)||function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||J()}function J(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function Q(e){if(Array.isArray(e))return e}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Z(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),e}function $(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?te(e):t}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ae(e,t)}function ae(e,t){return(ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return[e[0]*t+n,e[1]*t+a]}B.b.add(q.i,q.h,q.c);var oe=function(e){function t(e){var n;return K(this,t),(n=$(this,ee(t).call(this,e))).canvas=r.a.createRef(),n.circles=[],n.labels=[],n.mousedown=!1,n.mousedownStart=0,n.scale=1,n.vX=0,n.vY=0,n.prevX=0,n.prevY=0,n.handleScroll=n.handleScroll.bind(te(n)),n.handleDrag=n.handleDrag.bind(te(n)),n}return ne(t,r.a.Component),Z(t,[{key:"componentDidMount",value:function(){var e=this;this.paper=M()(this.canvas.current),this.canvas.current.addEventListener("wheel",this.handleScroll),this.canvas.current.addEventListener("drag",this.handleDrag),this.canvas.current.addEventListener("mousedown",function(t){e.prevX=t.x,e.prevY=t.y,e.mousedown=!0,e.mousedownStart=t.timeStamp}),this.canvas.current.addEventListener("mouseup",function(){e.mousedown=!1}),this.canvas.current.addEventListener("click",function(t){t.timeStamp-e.mousedownStart<500&&e.props.onSelectChange([])}),this.canvas.current.addEventListener("mousemove",this.handleDrag)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.width,a=t.height,r=t.data,i=t.selected,o=t.vertexFormatter,s=t.strokeColor;if(a===e.height&&n===e.width||this.paper.setSize(n,a),h.a.isEmpty(r)||!n||!a||a===e.height&&n===e.width&&r===e.data&&o===e.vertexFormatter||this.draw(),r===e.data||h.a.isEmpty(r)||this.resetView(),i!==e.selected){var c=!0,l=!1,u=void 0;try{for(var f,m=this.circles.entries()[Symbol.iterator]();!(c=(f=m.next()).done);c=!0){var p=W(f.value,2),v=p[0],d=p[1];-1!==i.indexOf(v)?d.attr("stroke",s):d.attr("stroke","#000")}}catch(e){l=!0,u=e}finally{try{c||null==m.return||m.return()}finally{if(l)throw u}}}if(s!==e.strokeColor&&i===e.selected){var y=!0,b=!1,g=void 0;try{for(var E,w=i[Symbol.iterator]();!(y=(E=w.next()).done);y=!0){v=E.value;this.circles[v].attr("stroke",s)}}catch(e){b=!0,g=e}finally{try{y||null==w.return||w.return()}finally{if(b)throw g}}}}},{key:"draw",value:function(){var e,t,n=this,a=this,r=this.props,i=r.height,o=r.width,s=r.data,c=r.onSelectChange,l=r.vertexFormatter,u=Math.min(o,i),f=[u/2+.05*o,u/2],m=h.a.partial(ie,h.a,u,.05*o);this.circles=[],this.labels=[],this.paper.clear();var p,v=h.a.map(s.vertices,function(e){var t=W(e,2),n=t[0],a=t[1];return[n,m(a)]}),d=h.a.map(v,1),y=h.a.map(s.intersects,function(e){var t=W(e,5),n=t[0],a=t[1],r=t[2],i=t[3],o=t[4];return[n,m(a),r,i*u,h.a.map(o,h.a.unary(m))]});if(2===h.a.size(d))e=re.apply(void 0,X(d[0]).concat(X(d[1])))/2,this.paper.path("\n        M ".concat(d[0][0]," ").concat(d[0][1],"\n        A ").concat(e," ").concat(e," 0 0 1 ").concat(d[1][0]," ").concat(d[1][1],"\n        A ").concat(e," ").concat(e," 0 0 1 ").concat(d[0][0]," ").concat(d[0][1],"\n      ")),t=e;else{var b=Q(p=d)||V(p)||J(),g=b[0],E=b.slice(1);e=(t=re.apply(void 0,X(g).concat(X(d[1]))))/(2*Math.tan(Math.PI/d.length)),this.paper.path("M ".concat(g[0]," ").concat(g[1],"\n")+h()([].concat(X(E),[g])).map(function(e){return"L ".concat(e[0]," ").concat(e[1])}).join("\n"))}var w=!0,S=!1,k=void 0;try{for(var C,N=function(){var e,r,i,o=W(C.value,2),s=o[0],u=W(o[1],2),m=u[0],p=u[1],d=(r=f,[(i=p)[0]-r[0],i[1]-r[1]]),b=re.apply(void 0,X(d).concat([0,0])),g=function(e,t){return[t[0]+e[0],t[1]+e[1]]}(ie(d,(20+b)/b),f),E=(360-360/v.length*s)%360,w=(e=n.paper).text.apply(e,X(g).concat([l[m]||m.toString()])),S=w.getBBox().width;if(n.labels.push(w),E<270&&E>90?w.rotate(E-180):w.rotate(E),S>t){var k=t/S;w.scale(k,k)}w.mouseover(function(){var e=a.props.fillColor;this.attr("fill",e),h.a.forEach(y,function(t,n){-1!==t[0].indexOf(m)&&a.circles[n].attr("fill",e).toFront()})}),w.mouseout(function(){this.attr("fill","#000"),h.a.forEach(y,function(e,t){-1!==e[0].indexOf(m)&&a.circles[t].attr("fill","#fff")})}),w.click(function(e){e.stopPropagation();var t=n.props.selected,a=h()(y).map(function(e,t){if(-1!==e[0].indexOf(m))return t}).filter(h.a.negate(h.a.isUndefined)).value();e.metaKey?c(h.a.uniq([].concat(X(t),X(a)))):e.altKey?c(h.a.difference(t,a)):c(a)})},O=v.entries()[Symbol.iterator]();!(w=(C=O.next()).done);w=!0)N()}catch(e){S=!0,k=e}finally{try{w||null==O.return||O.return()}finally{if(S)throw k}}var x=h()(y).map(4).map(h.a.size).sum(),j=!0,T=!1,_=void 0;try{for(var P,D=function(){var e,t=W(P.value,2),r=t[0],i=t[1],o=(e=n.paper).circle.apply(e,X(i[1]).concat([i[3]]));if(n.circles.push(o),o.attr({fill:"#fff","fill-opacity":1}),o.click(function(e){e.stopPropagation();var t=n.props.selected;e.metaKey?-1===t.indexOf(r)?c([].concat(X(t),[r])):c(t.filter(function(e){return e!==r})):c([r])}),o.mouseover(function(){var e=a.props.fillColor;this.attr({fill:e,"fill-opacity":1});var t=!0,n=!1,r=void 0;try{for(var o,s=function(){var t=o.value;a.labels[h.a.findIndex(v,function(e){return e[0]===t})].attr("fill",e)},c=i[0][Symbol.iterator]();!(t=(o=c.next()).done);t=!0)s()}catch(e){n=!0,r=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}}),o.mouseout(function(){o.attr({fill:"#fff","fill-opacity":1});var e=!0,t=!1,n=void 0;try{for(var r,s=function(){var e=r.value;a.labels[h.a.findIndex(v,function(t){return t[0]===e})].attr("fill","#000")},c=i[0][Symbol.iterator]();!(e=(r=c.next()).done);e=!0)s()}catch(e){t=!0,n=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw n}}}),x<600){var s=!0,l=!1,u=void 0;try{for(var f,m=i[4][Symbol.iterator]();!(s=(f=m.next()).done);s=!0){var p=f.value;n.paper.path("\n          M ".concat(i[1][0]," ").concat(i[1][1],"\n          L ").concat(p[0]," ").concat(p[1],"\n          ")).attr("arrow-end","classic")}}catch(e){l=!0,u=e}finally{try{s||null==m.return||m.return()}finally{if(l)throw u}}o.toFront()}else{var d=n.paper.set();o.mouseover(function(){o.attr("fill-opacity",1);var e=!0,t=!1,a=void 0;try{for(var r,s=i[4][Symbol.iterator]();!(e=(r=s.next()).done);e=!0){var c=r.value,l=n.paper.path("\n            M ".concat(i[1][0]," ").concat(i[1][1],"\n            L ").concat(c[0]," ").concat(c[1],"\n            "));l.attr("arrow-end","classic"),d.push(l),o.toFront()}}catch(e){t=!0,a=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw a}}}),o.mouseout(function(){o.attr("fill-opacity",0),d.remove(),d.clear()})}},R=y.entries()[Symbol.iterator]();!(j=(P=R.next()).done);j=!0)D()}catch(e){T=!0,_=e}finally{try{j||null==R.return||R.return()}finally{if(T)throw _}}}},{key:"handleScroll",value:function(e){e.preventDefault();var t=e.deltaY;t>0?this.zoomOut():t<0&&this.zoomIn()}},{key:"handleDrag",value:function(e){e.preventDefault(),this.mousedown&&(this.vX+=(this.prevX-e.x)*this.scale,this.vY+=(this.prevY-e.y)*this.scale,this.prevX=e.x,this.prevY=e.y,this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH))}},{key:"resetView",value:function(){this.scale=1,this.vX=0,this.vY=0,this.paper.setViewBox(0,0,this.vW,this.vH)}},{key:"zoomIn",value:function(){this.scale*=.95,this.scale=Math.max(this.scale,.1),this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)}},{key:"zoomOut",value:function(){this.scale*=1.05,this.scale=Math.min(this.scale,10),this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.width,a=e.height;return r.a.createElement("div",{style:{width:n,height:a,position:"relative"}},r.a.createElement("div",{ref:this.canvas,className:T()(t)}),r.a.createElement("div",{style:{position:"absolute",top:"10px",left:"0px"}},r.a.createElement("div",{className:"btn-group-vertical"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.resetView.bind(this)},r.a.createElement(F.a,{icon:"expand",className:"mr-1"})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.zoomIn.bind(this)},r.a.createElement(F.a,{icon:"search-plus",className:"mr-1"})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.zoomOut.bind(this)},r.a.createElement(F.a,{icon:"search-minus",className:"mr-1"})))))}},{key:"vW",get:function(){return this.paper.width*this.scale}},{key:"vH",get:function(){return this.paper.height*this.scale}}]),t}();oe.propTypes={className:N.a.string,width:N.a.number,height:N.a.number,data:N.a.object.isRequired,selected:N.a.array,onSelectChange:N.a.func,vertexFormatter:N.a.object,fillColor:N.a.string,strokeColor:N.a.string},oe.defaultProps={width:1280,height:800,onSelectChange:h.a.noop,vertexFormatter:{},fillColor:"#257AFD",strokeColor:"#257AFD"};var se=function(e){function t(e){var n;return K(this,t),(n=$(this,ee(t).call(this,e))).listOuterRef=r.a.createRef(),n.state={height:0},n.setSize=h.a.throttle(n.setSize.bind(te(n)),100),n}return ne(t,r.a.PureComponent),Z(t,[{key:"componentDidMount",value:function(){this.setSize(),window.addEventListener("resize",this.setSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setSize",value:function(){this.setState({height:document.documentElement.clientHeight-this.listOuterRef.current.getBoundingClientRect().top})}},{key:"renderItem",value:function(e){var t=e.index,n=e.style;return r.a.createElement("li",{className:"list-group-item",style:n},this.props.items[t])}},{key:"render",value:function(){return r.a.createElement(U.a,{className:this.props.className,ref:this.props.listRef,outerRef:this.listOuterRef,innerElementType:"ul",itemSize:50,height:this.state.height,itemCount:this.props.items.length},this.renderItem.bind(this))}}]),t}();se.propTypes={items:N.a.array.isRequired,listRef:N.a.object,className:N.a.string};var ce=function(e){function t(e){var n;return K(this,t),(n=$(this,ee(t).call(this,e))).searchIntersects=h.a.debounce(n.searchIntersects.bind(te(n)),150),n}return ne(t,r.a.Component),Z(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.value;t!==e.value&&this.searchIntersects(t)}},{key:"searchIntersects",value:function(e){var t=this.props,n=t.onSelectChange,a=t.data;if(e){var r=Y(e);n(h()(a.intersects).map(function(e,t){if(-1!==h.a.findIndex(e[2],function(e){return r.test(e)}))return t}).filter(h.a.negate(h.a.isUndefined)).value())}else n([])}},{key:"render",value:function(){return r.a.createElement("input",{type:"search",className:"form-control",placeholder:"Search",value:this.props.value,onChange:this.props.onChange})}}]),t}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e){return function(e){if(Array.isArray(e))return e}(e)||he(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function fe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||he(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function he(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ce.propTypes={value:N.a.string,onChange:N.a.func,selected:N.a.array,onSelectChange:N.a.func,data:N.a.object},B.b.add(q.g,q.e,q.j,q.a,q.b,q.f,q.d);var ye=function(e){function t(e){var n,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(i=pe(t).call(this,e))||"object"!==le(i)&&"function"!=typeof i?ve(a):i).canvas=r.a.createRef(),n.listRef=r.a.createRef(),n.state={height:0,width:0,data:{},items:[],itemsCurr:[],itemsPast:[],itemsFuture:[],selected:[],searchTerm:"",selectColor:"#257AFD"},n.setSize=h.a.throttle(n.setSize.bind(ve(n)),100),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,r.a.Component),n=t,(a=[{key:"componentDidMount",value:function(){this.getSungear(),this.setSize(),window.addEventListener("resize",this.setSize)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.state.selected!==t.selected){var a=h()(this.state.selected).map(function(e){return n.props.data.intersects[e][2]}).flatten().sortBy().value();this.setState({items:a},function(){var e=n.state.searchTerm;if(e){var t=Y(e),r=h.a.findIndex(a,function(e){return t.test(e)});-1!==r&&n.listRef.current.scrollToItem(r,"start")}})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setSize",value:function(){var e=this.canvas.current.getBoundingClientRect(),t=e.width,n=e.top;this.setState({height:document.documentElement.clientHeight-n,width:t})}},{key:"handleSelect",value:function(e){this.setState({selected:e})}},{key:"handleSelectColor",value:function(e){this.setState({selectColor:e.target.value})}},{key:"getSungear",value:function(e){var t=this,n=this.props.query;return this.props.getSungear(n,e).then(function(){t.setState({selected:[]})})}},{key:"narrowClick",value:function(e){var t=this;if(e.preventDefault(),this.state.items.length){var n=this.state.items;this.getSungear(n).then(function(){t.setState(function(e){return{itemsPast:[].concat(fe(e.itemsPast),[e.itemsCurr]),itemsCurr:n,itemsFuture:[]}})})}}},{key:"prevClick",value:function(e){var t=this;e.preventDefault();var n=this.state.itemsPast,a=n.slice(0,n.length-1),r=n[n.length-1];this.getSungear(r).then(function(){t.setState(function(e){return{itemsCurr:r,itemsPast:a,itemsFuture:[e.itemsCurr].concat(fe(e.itemsFuture))}})})}},{key:"nextClick",value:function(e){var t=this;e.preventDefault();var n=ue(this.state.itemsFuture),a=n[0],r=n.slice(1);this.getSungear(a).then(function(){t.setState(function(e){return{itemsCurr:a,itemsPast:[].concat(fe(e.itemsPast),[e.itemsCurr]),itemsFuture:r}})})}},{key:"resetClick",value:function(){var e=this;this.getSungear().then(function(){e.setState({itemsCurr:[],itemsPast:[],itemsFuture:[]})})}},{key:"inverseSelection",value:function(){var e=this.state.selected,t=this.props.data.intersects;this.setState({selected:h.a.difference(h.a.range(h.a.size(t)),e)})}},{key:"exportSvg",value:function(){try{!function(e,t){e.setAttribute("xmlns","http://www.w3.org/2000/svg");var n=e.outerHTML,a=new Blob(['<?xml version="1.0" standalone="no"?>\r\n',n],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}(this.canvas.current.getElementsByTagName("svg")[0],"sungear.svg")}catch(e){}}},{key:"handleSearch",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.height,n=e.width,a=e.selected,i=e.items,o=e.searchTerm,s=e.selectColor,c=this.props.data;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{ref:this.canvas,className:"col-8 w-100"},r.a.createElement(oe,{width:n,height:t,data:c,selected:a,onSelectChange:this.handleSelect.bind(this),strokeColor:s,fillColor:s})),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"btn-group mr-1"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.narrowClick.bind(this)},r.a.createElement(F.a,{icon:"filter",className:"mr-1"}),"Narrow"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.inverseSelection.bind(this)},r.a.createElement(F.a,{icon:"object-group",className:"mr-1"}),"Inverse"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.resetClick.bind(this)},r.a.createElement(F.a,{icon:"sync",className:"mr-1"}),"Reset")))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"d-inline mr-2"},"Views:"),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!this.state.itemsPast.length,onClick:this.prevClick.bind(this)},r.a.createElement(F.a,{icon:"arrow-circle-left",className:"mr-1"}),"Previous"),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!this.state.itemsFuture.length,onClick:this.nextClick.bind(this)},"Next",r.a.createElement(F.a,{icon:"arrow-circle-right",className:"ml-1"}))))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"btn-group"},r.a.createElement("a",{className:"btn btn-primary",href:"data:text/plain,"+h.a.join(this.state.items,"\n")+"\n",download:"items.txt"},r.a.createElement(F.a,{icon:"file-alt",className:"mr-1"}),"Export Items"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.exportSvg.bind(this)},r.a.createElement(F.a,{icon:"image",className:"mr-1"}),"Export Image")))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-inline"},r.a.createElement("label",{className:"mr-2",htmlFor:"color"},"Selection Color:"),r.a.createElement("input",{type:"color",id:"color",className:"form-control",style:{minWidth:"50px"},value:s,onChange:this.handleSelectColor.bind(this)})))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement(ce,{value:o,onChange:this.handleSearch.bind(this),data:c,selected:a,onSelectChange:this.handleSelect.bind(this)}))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,i.length.toLocaleString()," items selected"),r.a.createElement(se,{className:"list-group",items:i,listRef:this.listRef}))))))}}])&&me(n.prototype,a),i&&me(n,i),t}();ye.propTypes={query:N.a.string,data:N.a.object,getSungear:N.a.func};var be=Object(c.b)(function(e){return{query:e.query,data:e.data}},{getSungear:x})(ye);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function we(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ce=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),we(this,Se(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(g.a,{to:"/",className:"navbar-brand"},"Sungear"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{exact:!0,className:"nav-link",to:"/",activeClassName:"active"},"Home")))),r.a.createElement(w.a,null,r.a.createElement(S.a,{path:"/",exact:!0,component:z}),r.a.createElement(S.a,{path:"/sungear",component:be}),r.a.createElement(k.a,{to:"/"})))}}])&&Ee(n.prototype,a),i&&Ee(n,i),t}();o.a.render(r.a.createElement(c.a,{store:b},r.a.createElement(s.a,null,r.a.createElement(Ce,null))),document.getElementById("app"))}},[[32,1,2]]]);