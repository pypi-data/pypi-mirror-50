(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"Nemhauser_et_al_hormones.txt"},35:function(e,t,n){e.exports=n(52)},52:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(27),o=n.n(i),l=n(55),s=n(16),c=(n(44),n(11)),u=n(30),h=n(2),m=n.n(h);var f={query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return t.query;case"CLEAR_QUERY":return"";default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":return t.data;case"CLEAR_DATA":return{};default:return e}}},p=Object(c.c)(f);var v=function(){try{var e=localStorage.getItem("state");return null===e?void 0:JSON.parse(e)}catch(e){return}}(),d=c.d,y=Object(c.e)(p,v,d(Object(c.a)(u.a)));y.subscribe(m.a.throttle(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(e){try{localStorage.setItem("state","{}")}catch(e){}}}(y.getState())},1e3));var b=y,g=n(24),E=n(53),w=n(56),S=n(32),N=n(54),k=n(1),O=n.n(k);function x(e){return{type:"SET_DATA",data:e}}function C(e,t){return function(n){var a={value:e};return t?(a.filter_list=t,fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return n(x(e))})):fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return n(x(e))})}}var z=n(17),j=n.n(z),T=n(22),P=n.n(T);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=M(this,R(t).call(this,e))).state={value:"",error:!1},n.fileInput=r.a.createRef(),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,r.a.Component),n=t,(a=[{key:"handleSubmit",value:function(e){e.preventDefault(),this.submit()}},{key:"handleChange",value:function(e){this.setState({value:e.target.value,error:!1})}},{key:"handleDrop",value:function(e){var t;if(e.preventDefault(),e.dataTransfer.items){var n=!0,a=!1,r=void 0;try{for(var i,o=e.dataTransfer.items[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;if("file"===l.kind){t=l.getAsFile();break}}}catch(e){a=!0,r=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}}else t=e.dataTransfer.files[0];t?this.handleFile(t):this.setState({value:e.dataTransfer.getData("text/plain"),error:!1})}},{key:"handleDragOver",value:function(e){e.preventDefault()}},{key:"handleDragEnter",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleFileInput",value:function(e){e.target.files&&this.handleFile(e.target.files[0])}},{key:"handleUploadClick",value:function(e){this.fileInput.current.click()}},{key:"handleFile",value:function(e){var t=this,n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(e){t.setState({value:e.target.result,error:!1})}}},{key:"submit",value:function(){var e=this,t=this.state.value;this.props.getSungear(t).then(function(){e.props.setQuery(t),e.props.history.push("/sungear")}).catch(function(){e.setState({error:!0})})}},{key:"clear",value:function(){this.setState({value:"",error:!1})}},{key:"demoClick",value:function(e){var t=this;e.preventDefault(),fetch(P.a).then(function(e){return e.text()}).then(function(e){t.setState({value:e},t.submit.bind(t))}).catch(function(){t.setState({error:!0})})}},{key:"render",value:function(){var e=this.state.error;return r.a.createElement("div",{className:"jumbotron bg-white"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",{className:"display-4"},"Sungear"),r.a.createElement("p",{className:"lead"},"Visualize Overlapping Lists!"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"input-group",onDragEnter:this.handleDragEnter.bind(this),onDragOver:this.handleDragOver.bind(this),onDrop:this.handleDrop.bind(this)},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:this.handleUploadClick.bind(this)},"Upload")),r.a.createElement("textarea",{className:j()("form-control",e&&"is-invalid"),placeholder:"Input Lists Here",rows:5,onChange:this.handleChange.bind(this),value:this.state.value}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:this.clear.bind(this)},"Clear"),r.a.createElement("button",{className:"btn btn-primary"},"Submit"))),r.a.createElement("small",null,"You can also drag and drop text files."),r.a.createElement("small",{className:"form-text text-muted"},r.a.createElement("a",{href:"#",onClick:this.demoClick.bind(this)},"demo")),r.a.createElement("small",{className:"form-text text-muted"},r.a.createElement("a",{href:P.a,download:!0},"sample file"))),r.a.createElement("input",{type:"file",hidden:!0,ref:this.fileInput,onChange:this.handleFileInput.bind(this)}))))))}}])&&D(n.prototype,a),i&&D(n,i),t}();A.propTypes={getSungear:O.a.func,setQuery:O.a.func,history:O.a.object};var L=Object(s.b)(null,{getSungear:C,setQuery:function(e){return{type:"SET_QUERY",query:e}}})(A),F=n(7),U=n(31),Y=n.n(U),q=n(33);function B(e){return new RegExp("^"+m.a.escapeRegExp(e),"i")}var X=n(15);function V(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var W=function(e){e.styles;var t=V(e,["styles"]);return r.a.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",width:"454.815",height:"454.815"},t),r.a.createElement("path",{d:"M320.021 92.61c-35.843 0-68.447 14.091-92.613 36.98-24.169-22.896-56.767-36.98-92.609-36.98C60.47 92.61 0 153.08 0 227.411c0 74.322 60.47 134.795 134.798 134.795 35.843 0 68.44-14.091 92.609-36.983 24.166 22.898 56.771 36.983 92.613 36.983 74.322 0 134.795-60.473 134.795-134.795 0-74.331-60.472-134.801-134.794-134.801zM134.798 350.1c-67.658 0-122.693-55.047-122.693-122.689 0-67.651 55.041-122.695 122.693-122.695 32.58 0 62.16 12.85 84.143 33.641-20.965 23.768-33.727 54.947-33.727 89.055 0 34.117 12.761 65.29 33.727 89.063-21.983 20.775-51.563 33.625-84.143 33.625zm62.521-122.689c0-30.683 11.405-58.708 30.088-80.241 18.682 21.533 30.089 49.559 30.089 80.241 0 30.677-11.407 58.706-30.089 80.232-18.683-21.526-30.088-49.556-30.088-80.232zM320.021 350.1c-32.58 0-62.164-12.85-84.146-33.638 20.965-23.773 33.727-54.946 33.727-89.063 0-34.111-12.762-65.287-33.727-89.055 21.987-20.791 51.565-33.641 84.146-33.641 67.654 0 122.689 55.042 122.689 122.696 0 67.643-55.035 122.701-122.689 122.701zm-84.583-179.435h-17.901v-6.053h17.901v6.053zm-16.261 113.489h17.904v6.053h-17.904v-6.053zm28.626-92.051h-39.345v-6.053h39.345v6.053zm3.783 19.417h-50.053v-6.052h50.053v6.052zm1.761 13.872v6.05h-51.881v-6.05h51.881zm-49.296 19.775h46.695v6.053h-46.695v-6.053zm4.407 19.316h35.562v6.053h-35.562v-6.053z"}))};function K(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Q=function(e){e.styles;var t=K(e,["styles"]);return r.a.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",width:"454.815",height:"454.815"},t),r.a.createElement("path",{d:"M320.021 92.61c-35.843 0-68.447 14.091-92.613 36.98-24.169-22.896-56.767-36.98-92.609-36.98C60.47 92.61 0 153.08 0 227.411c0 74.322 60.47 134.795 134.798 134.795 35.843 0 68.44-14.091 92.609-36.983 24.166 22.898 56.771 36.983 92.613 36.983 74.322 0 134.795-60.473 134.795-134.795 0-74.331-60.472-134.801-134.794-134.801zM134.798 350.1c-67.658 0-122.693-55.047-122.693-122.689 0-67.651 55.041-122.695 122.693-122.695 32.58 0 62.16 12.85 84.143 33.641-20.965 23.768-33.727 54.947-33.727 89.055 0 34.117 12.761 65.29 33.727 89.063-21.983 20.775-51.563 33.625-84.143 33.625zm62.521-122.689c0-30.683 11.405-58.708 30.088-80.241 18.682 21.533 30.089 49.559 30.089 80.241 0 30.677-11.407 58.706-30.089 80.232-18.683-21.526-30.088-49.556-30.088-80.232zM320.021 350.1c-32.58 0-62.164-12.85-84.146-33.638 20.965-23.773 33.727-54.946 33.727-89.063 0-34.111-12.762-65.287-33.727-89.055 21.987-20.791 51.565-33.641 84.146-33.641 67.654 0 122.689 55.042 122.689 122.696 0 67.643-55.035 122.701-122.689 122.701zM27.249 192.363l-4.28-4.279 74.99-74.993 4.279 4.28-74.989 74.992zm-5.297 33.919l-4.279-4.279 110.738-110.744 4.279 4.279L21.952 226.282zm161.985-8.535L73.199 328.497l-4.279-4.279L179.657 213.47l4.28 4.277zm0 33.23l-86.62 86.634-4.279-4.279 86.625-86.634 4.274 4.279zm-67.758 89.571l70.3-70.308 4.279 4.279-70.3 70.309-4.279-4.28zm28.241 2.536l52.742-52.754 4.279 4.279-52.741 52.755-4.28-4.28zm13.353-224.109L22.41 254.34l-4.279-4.279 135.363-135.366 4.279 4.28zm22.605 5.423L30.274 274.52l-4.279-4.279 150.11-150.122 4.273 4.279zm22.577 8.958L39.989 296.319l-4.279-4.279 162.965-162.963 4.28 4.279zm-16.021 48.282L54.231 314.329l-4.279-4.279 132.697-132.697 4.285 4.285zm241.85 10.725l-74.989-74.993 4.279-4.28 74.989 74.993-4.279 4.28zm5.296 33.919L323.343 115.543l4.279-4.279 110.737 110.744-4.279 4.274zM276.363 213.47l110.744 110.747-4.279 4.279-110.744-110.75 4.279-4.276zm0 33.228l86.622 86.634-4.279 4.279-86.622-86.634 4.279-4.279zm-6.821 23.543l70.303 70.308-4.279 4.28-70.303-70.309 4.279-4.279zm-10.681 20.09l52.742 52.754-4.279 4.279-52.736-52.754 4.273-4.279zm43.675-175.636l135.356 135.366-4.279 4.279-135.356-135.365 4.279-4.28zm-22.614 5.424l150.115 150.122-4.279 4.279-150.11-150.122 4.274-4.279zm-22.573 8.957L420.314 292.04l-4.279 4.279-162.96-162.963 4.274-4.28zm16.03 48.277L406.081 310.05l-4.279 4.279-132.703-132.691 4.28-4.285zm-38.663-7.699h-17.9v-6.053h17.9v6.053zm-16.26 113.483h17.904v6.053h-17.904v-6.053zm28.625-92.045h-39.345v-6.053h39.345v6.053zm3.783 19.417h-50.052v-6.052h50.052v6.052zm1.762 13.872v6.056h-51.879v-6.056h51.879zm-49.302 19.781h46.695v6.053h-46.695v-6.053zm4.412 19.304h35.562v6.053h-35.562v-6.053z"}))},G=n(23),Z=n.n(G),$=n(8);function ee(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function te(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function ne(e,t){return re(e)||function(e,t){var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||ae()}function ae(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function re(e){if(Array.isArray(e))return e}function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function se(e,t,n){return t&&le(e.prototype,t),n&&le(e,n),e}function ce(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}X.b.add($.i,$.h,$.c);var pe=m.a.partial(function(e,t,n,a,r,i){if((a=Math.log10(a))>i)return"#ffffff";var o=90-n,l=n+m.a.clamp(o*((a-r)/(i-r)),0,o);m.a.isNaN(l)&&(l=n);var s=Z.a.hsl.rgb.raw(e,t,l);return"#"+Z.a.rgb.hex(s)},40,89.4,52,m.a,m.a,Math.log10(.5)),ve=m.a.flow(m.a.partial(m.a.clamp,m.a,Number.MIN_VALUE,Number.MAX_VALUE),Math.log10);function de(e,t,n,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-a,2))}function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return[e[0]*t+n,e[1]*t+a]}var be=function(e){function t(){return oe(this,t),ce(this,he(t).apply(this,arguments))}return me(t,r.a.PureComponent),se(t,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.x,a=e.y,i={display:t?"block":"none",position:"fixed",left:"".concat(n,"px"),top:"".concat(a,"px"),fontSize:"0.8em"};return r.a.createElement("div",{style:i,className:"border bg-white px-2"},this.props.children)}}]),t}();be.propTypes={show:O.a.bool.isRequired,x:O.a.number.isRequired,y:O.a.number.isRequired,children:O.a.node};var ge=function(e){function t(e){var n;return oe(this,t),(n=ce(this,he(t).call(this,e))).canvas=r.a.createRef(),n.state={selectMode:"union",toolTipX:0,toolTipY:0,toolTipShow:!1,toolTipContent:null},n.circles=[],n.labels=[],n.mousedown=!1,n.mousedownStart=0,n.scale=1,n.vX=0,n.vY=0,n.prevX=0,n.prevY=0,n.handleScroll=n.handleScroll.bind(ue(n)),n.handleDrag=n.handleDrag.bind(ue(n)),n}return me(t,r.a.Component),se(t,[{key:"componentDidMount",value:function(){var e=this;this.paper=Y()(this.canvas.current),this.paper.setViewBox=m.a.throttle(this.paper.setViewBox.bind(this.paper),100),this.canvas.current.addEventListener("wheel",this.handleScroll),this.canvas.current.addEventListener("drag",this.handleDrag),this.canvas.current.addEventListener("mousedown",function(t){e.prevX=t.x,e.prevY=t.y,e.mousedown=!0,e.mousedownStart=t.timeStamp}),this.canvas.current.addEventListener("mouseup",function(){e.mousedown=!1}),this.canvas.current.addEventListener("click",function(t){t.timeStamp-e.mousedownStart<500&&e.props.onSelectChange([])}),this.canvas.current.addEventListener("mousemove",this.handleDrag)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.width,a=t.height,r=t.data,i=t.selected,o=t.vertexFormatter,l=t.strokeColor;if(a===e.height&&n===e.width||this.paper.setSize(n,a),m.a.isEmpty(r)||!n||!a||a===e.height&&n===e.width&&r===e.data&&o===e.vertexFormatter||this.draw(),r===e.data||m.a.isEmpty(r)||this.resetView(),i!==e.selected){var s=!0,c=!1,u=void 0;try{for(var h,f=this.circles.entries()[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var p=ne(h.value,2),v=p[0],d=p[1];-1!==i.indexOf(v)?d.attr("stroke",l):d.attr("stroke","#000")}}catch(e){c=!0,u=e}finally{try{s||null==f.return||f.return()}finally{if(c)throw u}}}if(l!==e.strokeColor&&i===e.selected){var y=!0,b=!1,g=void 0;try{for(var E,w=i[Symbol.iterator]();!(y=(E=w.next()).done);y=!0){v=E.value;this.circles[v].attr("stroke",l)}}catch(e){b=!0,g=e}finally{try{y||null==w.return||w.return()}finally{if(b)throw g}}}}},{key:"draw",value:function(){var e,t,n=this,a=this,i=this.props,o=i.height,l=i.width,s=i.data,c=i.onSelectChange,u=i.vertexFormatter,h=Math.min(l,o),f=[h/2,h/2],p=m.a.partial(ye,m.a,h);this.circles=[],this.labels=[],this.paper.clear();var v,d=m.a.map(s.vertices,function(e){var t=ne(e,2),n=t[0],a=t[1];return[n,p(a)]}),y=m.a.map(d,1),b=m.a.map(s.intersects,function(e){var t=ne(e,6),n=t[0],a=t[1],r=t[2],i=t[3],o=t[4],l=t[5];return[n,p(a),r,i,o*h,m.a.map(l,m.a.unary(p))]}),g=m()(b).map(3).map("adj_p"),E=ve(g.min()),w=m.a.partial(pe,m.a,E),S=g.map(m.a.unary(w)).value();if(2===m.a.size(y))e=de.apply(void 0,ee(y[0]).concat(ee(y[1])))/2,this.paper.path("\n        M ".concat(y[0][0]," ").concat(y[0][1],"\n        A ").concat(e," ").concat(e," 0 0 1 ").concat(y[1][0]," ").concat(y[1][1],"\n        A ").concat(e," ").concat(e," 0 0 1 ").concat(y[0][0]," ").concat(y[0][1],"\n      ")),t=e;else{var N=re(v=y)||te(v)||ae(),k=N[0],O=N.slice(1);e=(t=de.apply(void 0,ee(k).concat(ee(y[1]))))/(2*Math.tan(Math.PI/y.length)),this.paper.path("M ".concat(k[0]," ").concat(k[1],"\n")+m()([].concat(ee(O),[k])).map(function(e){return"L ".concat(e[0]," ").concat(e[1])}).join("\n"))}var x=!0,C=!1,z=void 0;try{for(var j,T=function(){var e,r,i,o=ne(j.value,2),l=o[0],s=ne(o[1],2),h=s[0],p=s[1],v=(r=f,[(i=p)[0]-r[0],i[1]-r[1]]),y=de.apply(void 0,ee(v).concat([0,0])),g=function(e,t){return[t[0]+e[0],t[1]+e[1]]}(ye(v,(20+y)/y),f),E=(360-360/d.length*l)%360,w=(e=n.paper).text.apply(e,ee(g).concat([u[h]||h.toString()])),N=w.getBBox().width;if(n.labels.push(w),E<270&&E>90?w.rotate(E-180):w.rotate(E),N>t){var k=t/N;w.scale(k,k)}w.mouseover(function(){var e=a.props.fillColor;this.attr("fill",e),m.a.forEach(b,function(t,n){-1!==t[0].indexOf(h)&&a.circles[n].attr("fill",e).toFront()})}),w.mouseout(function(){this.attr("fill","#000"),m.a.forEach(b,function(e,t){-1!==e[0].indexOf(h)&&a.circles[t].attr("fill",S[t])})}),w.click(function(e){e.stopPropagation();var t=n.props.selected,a=m()(b).map(function(e,t){if(-1!==e[0].indexOf(h))return t}).filter(m.a.negate(m.a.isUndefined)).value();e.metaKey||e.shiftKey||e.ctrlKey?"union"!==n.state.selectMode&&t.length?c(m.a.uniq(m.a.intersection(t,a))):c(m.a.uniq([].concat(ee(t),ee(a)))):e.altKey?c(m.a.difference(t,a)):c(a)})},P=d.entries()[Symbol.iterator]();!(x=(j=P.next()).done);x=!0)T()}catch(e){C=!0,z=e}finally{try{x||null==P.return||P.return()}finally{if(C)throw z}}var _=m()(b).map(5).map(m.a.size).sum(),D=!0,M=!1,R=void 0;try{for(var I,A=function(){var e,t=ne(I.value,2),i=t[0],o=t[1],l=(e=n.paper).circle.apply(e,ee(o[1]).concat([o[4]])),s=S[i];if(n.circles.push(l),l.attr("fill",s),l.click(function(e){e.stopPropagation();var t=n.props.selected;e.metaKey||e.shiftKey||e.ctrlKey?-1===t.indexOf(i)?c([].concat(ee(t),[i])):c(t.filter(function(e){return e!==i})):c([i])}),l.mouseover(function(){var e=a.props.fillColor;a.setState({toolTipShow:!0,toolTipContent:r.a.createElement("div",null,r.a.createElement("p",{className:"mb-0"},"p-value: ",o[3].p_value.toExponential(3)),r.a.createElement("p",{className:"mb-0"},"adjusted p-value: ",o[3].adj_p.toExponential(3)),r.a.createElement("p",{className:"mb-0"},"size: ",o[2].length),r.a.createElement("p",{className:"mb-0"},"expected: ",o[3].expected.toFixed(3)))}),this.attr("fill",e);var t=!0,n=!1,i=void 0;try{for(var l,s=function(){var t=l.value;a.labels[m.a.findIndex(d,function(e){return e[0]===t})].attr("fill",e)},c=o[0][Symbol.iterator]();!(t=(l=c.next()).done);t=!0)s()}catch(e){n=!0,i=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw i}}}),l.mouseout(function(){this.attr("fill",s),a.setState({toolTipShow:!1});var e=!0,t=!1,n=void 0;try{for(var r,i=function(){var e=r.value;a.labels[m.a.findIndex(d,function(t){return t[0]===e})].attr("fill","#000")},l=o[0][Symbol.iterator]();!(e=(r=l.next()).done);e=!0)i()}catch(e){t=!0,n=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw n}}}),_<600){var u=!0,h=!1,f=void 0;try{for(var p,v=o[5][Symbol.iterator]();!(u=(p=v.next()).done);u=!0){var y=p.value;n.paper.path("\n          M ".concat(o[1][0]," ").concat(o[1][1],"\n          L ").concat(y[0]," ").concat(y[1],"\n          ")).attr("arrow-end","classic")}}catch(e){h=!0,f=e}finally{try{u||null==v.return||v.return()}finally{if(h)throw f}}l.toFront()}else{var b=n.paper.set();l.mouseover(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=o[5][Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var l=r.value,s=a.paper.path("\n            M ".concat(o[1][0]," ").concat(o[1][1],"\n            L ").concat(l[0]," ").concat(l[1],"\n            "));s.attr("arrow-end","classic"),b.push(s),this.toFront()}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}),l.mouseout(function(){b.remove(),b.clear()})}},L=b.entries()[Symbol.iterator]();!(D=(I=L.next()).done);D=!0)A()}catch(e){M=!0,R=e}finally{try{D||null==L.return||L.return()}finally{if(M)throw R}}}},{key:"handleScroll",value:function(e){e.preventDefault();var t=e.deltaY;t>0?this.zoomOut():t<0&&this.zoomIn()}},{key:"handleDrag",value:function(e){e.preventDefault();var t=e.x,n=e.y;this.mousedown?(this.vX+=(this.prevX-t)*this.scale,this.vY+=(this.prevY-n)*this.scale,this.prevX=t,this.prevY=n,this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)):this.setState({toolTipX:t+10,toolTipY:n+10})}},{key:"resetView",value:function(){this.scale=1,this.vX=0,this.vY=0,this.paper.setViewBox(0,0,this.vW,this.vH)}},{key:"zoomIn",value:function(){this.scale*=.95,this.scale=Math.max(this.scale,.1),this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)}},{key:"zoomOut",value:function(){this.scale*=1.05,this.scale=Math.min(this.scale,10),this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)}},{key:"setSelectMode",value:function(e){this.setState({selectMode:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.width,a=e.height,i=this.state,o=i.selectMode,l=i.toolTipX,s=i.toolTipY,c=i.toolTipShow,u=i.toolTipContent;return r.a.createElement("div",{style:{width:n,height:a,position:"relative"}},r.a.createElement("div",{ref:this.canvas,className:j()(t)}),r.a.createElement("div",{className:"d-flex flex-column",style:{position:"absolute",top:"10px",left:"0px"}},r.a.createElement("div",{className:"btn-group-vertical mb-2"},r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.resetView.bind(this)},r.a.createElement(F.a,{icon:"expand",className:"mr-1"})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.zoomIn.bind(this)},r.a.createElement(F.a,{icon:"search-plus",className:"mr-1"})),r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.zoomOut.bind(this)},r.a.createElement(F.a,{icon:"search-minus",className:"mr-1"}))),r.a.createElement("div",{className:"btn-group-vertical"},r.a.createElement("button",{type:"button",className:j()("btn btn-primary py-0 px-1","union"===o&&"active"),onClick:this.setSelectMode.bind(this,"union"),title:"union"},r.a.createElement(Q,{width:"32",height:"32",viewBox:"0 93 455 270",style:{fill:"#ffffff"}})),r.a.createElement("button",{type:"button",className:j()("btn btn-primary py-0 px-1","intersection"===o&&"active"),onClick:this.setSelectMode.bind(this,"intersection"),title:"intersection"},r.a.createElement(W,{width:"32",height:"32",viewBox:"0 93 455 270",style:{fill:"#ffffff"}})))),r.a.createElement(be,{x:l,y:s,show:c},u))}},{key:"vW",get:function(){return this.paper.width*this.scale}},{key:"vH",get:function(){return this.paper.height*this.scale}}]),t}();ge.propTypes={className:O.a.string,width:O.a.number,height:O.a.number,data:O.a.object.isRequired,selected:O.a.array,onSelectChange:O.a.func,vertexFormatter:O.a.object,fillColor:O.a.string,strokeColor:O.a.string},ge.defaultProps={width:1280,height:800,onSelectChange:m.a.noop,vertexFormatter:{},fillColor:"#257AFD",strokeColor:"#257AFD"};var Ee=function(e){function t(){return oe(this,t),ce(this,he(t).apply(this,arguments))}return me(t,r.a.PureComponent),se(t,[{key:"renderItem",value:function(e){var t=e.index,n=e.style;return r.a.createElement("li",{className:"list-group-item",style:n},this.props.items[t])}},{key:"render",value:function(){return r.a.createElement(q.a,{className:this.props.className,ref:this.props.listRef,innerElementType:"ul",itemSize:50,height:this.props.height,itemCount:this.props.items.length},this.renderItem.bind(this))}}]),t}();Ee.propTypes={items:O.a.array.isRequired,height:O.a.number.isRequired,listRef:O.a.object,className:O.a.string};var we=function(e){function t(e){var n;return oe(this,t),(n=ce(this,he(t).call(this,e))).searchIntersects=m.a.debounce(n.searchIntersects.bind(ue(n)),150),n}return me(t,r.a.Component),se(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.value;t!==e.value&&this.searchIntersects(t)}},{key:"searchIntersects",value:function(e){var t=this.props,n=t.onSelectChange,a=t.data;if(e){var r=B(e);n(m()(a.intersects).map(function(e,t){if(-1!==m.a.findIndex(e[2],function(e){return r.test(e)}))return t}).filter(m.a.negate(m.a.isUndefined)).value())}else n([])}},{key:"render",value:function(){return r.a.createElement("input",{type:"search",className:"form-control",placeholder:"Search",value:this.props.value,onChange:this.props.onChange})}}]),t}();function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e){return function(e){if(Array.isArray(e))return e}(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ke(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Oe(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ce(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Te(e,t,n){return t&&je(e.prototype,t),n&&je(e,n),e}function Pe(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?De(e):t}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}we.propTypes={value:O.a.string,onChange:O.a.func,selected:O.a.array,onSelectChange:O.a.func,data:O.a.object},X.b.add($.g,$.e,$.j,$.a,$.b,$.f,$.d);var Ie,Ae=(Ie=Ee,function(e){function t(e){var n;return ze(this,t),(n=Pe(this,_e(t).call(this,e))).itemRef=r.a.createRef(),n.state={height:0},n.setSize=m.a.throttle(n.setSize.bind(De(n)),100),n}return Me(t,r.a.Component),Te(t,[{key:"componentDidMount",value:function(){this.setSize(),window.addEventListener("resize",this.setSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setSize",value:function(){var e=document.documentElement.clientHeight;this.setState({height:Math.min(e-this.itemRef.current.getBoundingClientRect().top,e/2)})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.innerClassName,a=Ce(e,["className","innerClassName"]);return r.a.createElement("div",{ref:this.itemRef,className:t},r.a.createElement(Ie,xe({height:this.state.height,className:n},a)))}}]),t}());var Le=function(e){function t(e){var n;return ze(this,t),(n=Pe(this,_e(t).call(this,e))).canvas=r.a.createRef(),n.listRef=r.a.createRef(),n.state={height:0,width:0,data:{},items:[],itemsCurr:[],itemsPast:[],itemsFuture:[],selected:[],searchTerm:"",selectColor:"#257AFD"},n.setSize=m.a.throttle(n.setSize.bind(De(n)),100),n}return Me(t,r.a.Component),Te(t,[{key:"componentDidMount",value:function(){this.getSungear(),this.setSize(),window.addEventListener("resize",this.setSize)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.state.selected!==t.selected){var a=m()(this.state.selected).map(function(e){return n.props.data.intersects[e][2]}).flatten().sortBy().value();this.setState({items:a},function(){var e=n.state.searchTerm;if(e){var t=B(e),r=m.a.findIndex(a,function(e){return t.test(e)});-1!==r&&n.listRef.current.scrollToItem(r,"start")}})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setSize",value:function(){var e=this.canvas.current.getBoundingClientRect(),t=e.width,n=e.top;this.setState({height:document.documentElement.clientHeight-n,width:t})}},{key:"handleSelect",value:function(e){this.setState({selected:e})}},{key:"handleSelectColor",value:function(e){this.setState({selectColor:e.target.value})}},{key:"getSungear",value:function(e){var t=this,n=this.props.query;return this.props.getSungear(n,e).then(function(){t.setState({selected:[]})})}},{key:"narrowClick",value:function(e){var t=this;if(e.preventDefault(),this.state.items.length){var n=this.state.items;this.getSungear(n).then(function(){t.setState(function(e){return{itemsPast:[].concat(ke(e.itemsPast),[e.itemsCurr]),itemsCurr:n,itemsFuture:[]}})})}}},{key:"prevClick",value:function(e){var t=this;e.preventDefault();var n=this.state.itemsPast,a=n.slice(0,n.length-1),r=n[n.length-1];this.getSungear(r).then(function(){t.setState(function(e){return{itemsCurr:r,itemsPast:a,itemsFuture:[e.itemsCurr].concat(ke(e.itemsFuture))}})})}},{key:"nextClick",value:function(e){var t=this;e.preventDefault();var n=Ne(this.state.itemsFuture),a=n[0],r=n.slice(1);this.getSungear(a).then(function(){t.setState(function(e){return{itemsCurr:a,itemsPast:[].concat(ke(e.itemsPast),[e.itemsCurr]),itemsFuture:r}})})}},{key:"resetClick",value:function(){var e=this;this.getSungear().then(function(){e.setState({itemsCurr:[],itemsPast:[],itemsFuture:[]})})}},{key:"inverseSelection",value:function(){var e=this.state.selected,t=this.props.data.intersects;this.setState({selected:m.a.difference(m.a.range(m.a.size(t)),e)})}},{key:"exportSvg",value:function(){try{!function(e,t){e.setAttribute("xmlns","http://www.w3.org/2000/svg");var n=e.outerHTML,a=new Blob(['<?xml version="1.0" standalone="no"?>\r\n',n],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}(this.canvas.current.getElementsByTagName("svg")[0],"sungear.svg")}catch(e){}}},{key:"handleSearch",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.height,n=e.width,a=e.selected,i=e.items,o=e.searchTerm,l=e.selectColor,s=this.props.data;return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{ref:this.canvas,className:"col-8 w-100"},r.a.createElement(ge,{width:n,height:t,data:s,selected:a,onSelectChange:this.handleSelect.bind(this),strokeColor:l,fillColor:l})),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"btn-group mr-1"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.narrowClick.bind(this)},r.a.createElement(F.a,{icon:"filter",className:"mr-1"}),"Narrow"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.inverseSelection.bind(this)},r.a.createElement(F.a,{icon:"object-group",className:"mr-1"}),"Inverse"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.resetClick.bind(this)},r.a.createElement(F.a,{icon:"sync",className:"mr-1"}),"Reset")))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"d-inline mr-2"},"Views:"),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!this.state.itemsPast.length,onClick:this.prevClick.bind(this)},r.a.createElement(F.a,{icon:"arrow-circle-left",className:"mr-1"}),"Previous"),r.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!this.state.itemsFuture.length,onClick:this.nextClick.bind(this)},"Next",r.a.createElement(F.a,{icon:"arrow-circle-right",className:"ml-1"}))))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"btn-group"},r.a.createElement("a",{className:"btn btn-primary",href:"data:text/plain,"+m.a.join(this.state.items,"\n")+"\n",download:"items.txt"},r.a.createElement(F.a,{icon:"file-alt",className:"mr-1"}),"Export Items"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.exportSvg.bind(this)},r.a.createElement(F.a,{icon:"image",className:"mr-1"}),"Export Image")))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-inline"},r.a.createElement("label",{className:"mr-2",htmlFor:"color"},"Selection Color:"),r.a.createElement("input",{type:"color",id:"color",className:"form-control",style:{minWidth:"50px"},value:l,onChange:this.handleSelectColor.bind(this)})))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement(we,{value:o,onChange:this.handleSearch.bind(this),data:s,selected:a,onSelectChange:this.handleSelect.bind(this)}))),r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,i.length.toLocaleString()," items selected"),r.a.createElement(Ae,{className:"list-group",items:i,listRef:this.listRef}))))))}}]),t}();Le.propTypes={query:O.a.string,data:O.a.object,getSungear:O.a.func};var Fe=Object(s.b)(function(e){return{query:e.query,data:e.data}},{getSungear:C})(Le);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function qe(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ve=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),qe(this,Be(t).apply(this,arguments))}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,r.a.Component),n=t,(a=[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(g.a,{to:"/",className:"navbar-brand"},"Sungear"),r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(E.a,{exact:!0,className:"nav-link",to:"/",activeClassName:"active"},"Home"))),r.a.createElement("div",{className:"d-inline mr-2"},r.a.createElement("a",{className:"github-button",href:"https://github.com/zachary822","data-size":"large","aria-label":"Follow @zachary822 on GitHub"},"Follow @zachary822")),r.a.createElement("div",{className:"d-inline"},r.a.createElement("a",{className:"github-button",href:"https://github.com/zachary822/sungear","data-icon":"octicon-star","data-size":"large","data-show-count":"true","aria-label":"Star zachary822/sungear on GitHub"},"Star"))),r.a.createElement(w.a,null,r.a.createElement(S.a,{path:"/",exact:!0,component:L}),r.a.createElement(S.a,{path:"/sungear",component:Fe}),r.a.createElement(N.a,{to:"/"})))}}])&&Ye(n.prototype,a),i&&Ye(n,i),t}();o.a.render(r.a.createElement(s.a,{store:b},r.a.createElement(l.a,null,r.a.createElement(Ve,null))),document.getElementById("app"))}},[[35,1,2]]]);