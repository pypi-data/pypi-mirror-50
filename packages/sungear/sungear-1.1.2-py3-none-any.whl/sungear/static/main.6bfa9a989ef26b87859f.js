(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n.p+"Nemhauser_et_al_hormones.txt"},33:function(e,t,n){e.exports=n(48)},48:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(25),o=n.n(i),l=n(51),s=n(16),c=(n(42),n(11)),u=n(28),h=n(2),f=n.n(h);var m={query:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_QUERY":return t.query;case"CLEAR_QUERY":return"";default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DATA":return t.data;case"CLEAR_DATA":return{};default:return e}}},p=Object(c.c)(m);var v=function(){try{var e=localStorage.getItem("state");return null===e?void 0:JSON.parse(e)}catch(e){return}}(),d=c.d,y=Object(c.e)(p,v,d(Object(c.a)(u.a)));y.subscribe(f.a.throttle(function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(e){}}(y.getState())},1e3));var b=y,g=n(23),E=n(49),w=n(52),S=n(30),k=n(50),O=n(1),C=n.n(O);function N(e){return{type:"SET_DATA",data:e}}function x(e,t){return function(n){var r={value:e};return t?(r.filter_list=t,fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){return n(N(e))})):fetch("/api",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){return n(N(e))})}}var z=n(17),j=n.n(z),P=n(22),T=n.n(P);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=R(this,I(t).call(this,e))).state={value:"",error:!1},n.fileInput=a.a.createRef(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,a.a.Component),n=t,(r=[{key:"handleSubmit",value:function(e){e.preventDefault(),this.submit()}},{key:"handleChange",value:function(e){this.setState({value:e.target.value,error:!1})}},{key:"handleDrop",value:function(e){var t;if(e.preventDefault(),e.dataTransfer.items){var n=!0,r=!1,a=void 0;try{for(var i,o=e.dataTransfer.items[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;if("file"===l.kind){t=l.getAsFile();break}}}catch(e){r=!0,a=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}}else t=e.dataTransfer.files[0];t?this.handleFile(t):this.setState({value:e.dataTransfer.getData("text/plain"),error:!1})}},{key:"handleDragOver",value:function(e){e.preventDefault()}},{key:"handleDragEnter",value:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"handleFileInput",value:function(e){e.target.files&&this.handleFile(e.target.files[0])}},{key:"handleUploadClick",value:function(e){this.fileInput.current.click()}},{key:"handleFile",value:function(e){var t=this,n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(e){t.setState({value:e.target.result,error:!1})}}},{key:"submit",value:function(){var e=this,t=this.state.value;this.props.getSungear(t).then(function(){e.props.setQuery(t),e.props.history.push("/sungear")}).catch(function(){e.setState({error:!0})})}},{key:"clear",value:function(){this.setState({value:"",error:!1})}},{key:"demoClick",value:function(e){var t=this;e.preventDefault(),fetch(T.a).then(function(e){return e.text()}).then(function(e){t.setState({value:e},t.submit.bind(t))}).catch(function(){t.setState({error:!0})})}},{key:"render",value:function(){var e=this.state.error;return a.a.createElement("div",{className:"jumbotron bg-white"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col"},a.a.createElement("h1",{className:"display-4"},"Sungear"),a.a.createElement("p",{className:"lead"},"Visualize Overlapping Lists!"))),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col"},a.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},a.a.createElement("div",{className:"form-group"},a.a.createElement("div",{className:"input-group",onDragEnter:this.handleDragEnter.bind(this),onDragOver:this.handleDragOver.bind(this),onDrop:this.handleDrop.bind(this)},a.a.createElement("div",{className:"input-group-prepend"},a.a.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:this.handleUploadClick.bind(this)},"Upload")),a.a.createElement("textarea",{className:j()("form-control",e&&"is-invalid"),placeholder:"Input Lists Here",rows:5,onChange:this.handleChange.bind(this),value:this.state.value}),a.a.createElement("div",{className:"input-group-append"},a.a.createElement("button",{type:"button",className:"btn btn-outline-danger",onClick:this.clear.bind(this)},"Clear"),a.a.createElement("button",{className:"btn btn-primary"},"Submit"))),a.a.createElement("small",null,"You can also drag and drop text files."),a.a.createElement("small",{className:"form-text text-muted"},a.a.createElement("a",{href:"#",onClick:this.demoClick.bind(this)},"demo")),a.a.createElement("small",{className:"form-text text-muted"},a.a.createElement("a",{href:T.a,download:!0},"sample file"))),a.a.createElement("input",{type:"file",hidden:!0,ref:this.fileInput,onChange:this.handleFileInput.bind(this)}))))))}}])&&D(n.prototype,r),i&&D(n,i),t}();M.propTypes={getSungear:C.a.func,setQuery:C.a.func,history:C.a.object};var A=Object(s.b)(null,{getSungear:x,setQuery:function(e){return{type:"SET_QUERY",query:e}}})(M),F=n(7),U=n(29),Y=n.n(U),B=n(31);function q(e){return new RegExp("^"+f.a.escapeRegExp(e),"i")}var H=n(15);function X(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var W=function(e){e.styles;var t=X(e,["styles"]);return a.a.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg",width:"454.815",height:"454.815"},t),a.a.createElement("path",{d:"M320.021 92.61c-35.843 0-68.447 14.091-92.613 36.98-24.169-22.896-56.767-36.98-92.609-36.98C60.47 92.61 0 153.08 0 227.411c0 74.322 60.47 134.795 134.798 134.795 35.843 0 68.44-14.091 92.609-36.983 24.166 22.898 56.771 36.983 92.613 36.983 74.322 0 134.795-60.473 134.795-134.795 0-74.331-60.472-134.801-134.794-134.801zM134.798 350.1c-67.658 0-122.693-55.047-122.693-122.689 0-67.651 55.041-122.695 122.693-122.695 32.58 0 62.16 12.85 84.143 33.641-20.965 23.768-33.727 54.947-33.727 89.055 0 34.117 12.761 65.29 33.727 89.063-21.983 20.775-51.563 33.625-84.143 33.625zm62.521-122.689c0-30.683 11.405-58.708 30.088-80.241 18.682 21.533 30.089 49.559 30.089 80.241 0 30.677-11.407 58.706-30.089 80.232-18.683-21.526-30.088-49.556-30.088-80.232zM320.021 350.1c-32.58 0-62.164-12.85-84.146-33.638 20.965-23.773 33.727-54.946 33.727-89.063 0-34.111-12.762-65.287-33.727-89.055 21.987-20.791 51.565-33.641 84.146-33.641 67.654 0 122.689 55.042 122.689 122.696 0 67.643-55.035 122.701-122.689 122.701zm-84.583-179.435h-17.901v-6.053h17.901v6.053zm-16.261 113.489h17.904v6.053h-17.904v-6.053zm28.626-92.051h-39.345v-6.053h39.345v6.053zm3.783 19.417h-50.053v-6.052h50.053v6.052zm1.761 13.872v6.05h-51.881v-6.05h51.881zm-49.296 19.775h46.695v6.053h-46.695v-6.053zm4.407 19.316h35.562v6.053h-35.562v-6.053z"}))};function K(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Q=function(e){e.styles;var t=K(e,["styles"]);return a.a.createElement("svg",J({xmlns:"http://www.w3.org/2000/svg",width:"454.815",height:"454.815"},t),a.a.createElement("path",{d:"M320.021 92.61c-35.843 0-68.447 14.091-92.613 36.98-24.169-22.896-56.767-36.98-92.609-36.98C60.47 92.61 0 153.08 0 227.411c0 74.322 60.47 134.795 134.798 134.795 35.843 0 68.44-14.091 92.609-36.983 24.166 22.898 56.771 36.983 92.613 36.983 74.322 0 134.795-60.473 134.795-134.795 0-74.331-60.472-134.801-134.794-134.801zM134.798 350.1c-67.658 0-122.693-55.047-122.693-122.689 0-67.651 55.041-122.695 122.693-122.695 32.58 0 62.16 12.85 84.143 33.641-20.965 23.768-33.727 54.947-33.727 89.055 0 34.117 12.761 65.29 33.727 89.063-21.983 20.775-51.563 33.625-84.143 33.625zm62.521-122.689c0-30.683 11.405-58.708 30.088-80.241 18.682 21.533 30.089 49.559 30.089 80.241 0 30.677-11.407 58.706-30.089 80.232-18.683-21.526-30.088-49.556-30.088-80.232zM320.021 350.1c-32.58 0-62.164-12.85-84.146-33.638 20.965-23.773 33.727-54.946 33.727-89.063 0-34.111-12.762-65.287-33.727-89.055 21.987-20.791 51.565-33.641 84.146-33.641 67.654 0 122.689 55.042 122.689 122.696 0 67.643-55.035 122.701-122.689 122.701zM27.249 192.363l-4.28-4.279 74.99-74.993 4.279 4.28-74.989 74.992zm-5.297 33.919l-4.279-4.279 110.738-110.744 4.279 4.279L21.952 226.282zm161.985-8.535L73.199 328.497l-4.279-4.279L179.657 213.47l4.28 4.277zm0 33.23l-86.62 86.634-4.279-4.279 86.625-86.634 4.274 4.279zm-67.758 89.571l70.3-70.308 4.279 4.279-70.3 70.309-4.279-4.28zm28.241 2.536l52.742-52.754 4.279 4.279-52.741 52.755-4.28-4.28zm13.353-224.109L22.41 254.34l-4.279-4.279 135.363-135.366 4.279 4.28zm22.605 5.423L30.274 274.52l-4.279-4.279 150.11-150.122 4.273 4.279zm22.577 8.958L39.989 296.319l-4.279-4.279 162.965-162.963 4.28 4.279zm-16.021 48.282L54.231 314.329l-4.279-4.279 132.697-132.697 4.285 4.285zm241.85 10.725l-74.989-74.993 4.279-4.28 74.989 74.993-4.279 4.28zm5.296 33.919L323.343 115.543l4.279-4.279 110.737 110.744-4.279 4.274zM276.363 213.47l110.744 110.747-4.279 4.279-110.744-110.75 4.279-4.276zm0 33.228l86.622 86.634-4.279 4.279-86.622-86.634 4.279-4.279zm-6.821 23.543l70.303 70.308-4.279 4.28-70.303-70.309 4.279-4.279zm-10.681 20.09l52.742 52.754-4.279 4.279-52.736-52.754 4.273-4.279zm43.675-175.636l135.356 135.366-4.279 4.279-135.356-135.365 4.279-4.28zm-22.614 5.424l150.115 150.122-4.279 4.279-150.11-150.122 4.274-4.279zm-22.573 8.957L420.314 292.04l-4.279 4.279-162.96-162.963 4.274-4.28zm16.03 48.277L406.081 310.05l-4.279 4.279-132.703-132.691 4.28-4.285zm-38.663-7.699h-17.9v-6.053h17.9v6.053zm-16.26 113.483h17.904v6.053h-17.904v-6.053zm28.625-92.045h-39.345v-6.053h39.345v6.053zm3.783 19.417h-50.052v-6.052h50.052v6.052zm1.762 13.872v6.056h-51.879v-6.056h51.879zm-49.302 19.781h46.695v6.053h-46.695v-6.053zm4.412 19.304h35.562v6.053h-35.562v-6.053z"}))},G=n(8);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ee(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function te(e,t){return re(e)||function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n}(e,t)||ne()}function ne(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function re(e){if(Array.isArray(e))return e}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,n){return t&&ie(e.prototype,t),n&&ie(e,n),e}function le(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?ce(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e,t,n,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-r,2))}function me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return[e[0]*t+n,e[1]*t+r]}H.b.add(G.i,G.h,G.c);var pe=function(e){function t(e){var n;return ae(this,t),(n=le(this,se(t).call(this,e))).canvas=a.a.createRef(),n.state={selectMode:"union"},n.circles=[],n.labels=[],n.mousedown=!1,n.mousedownStart=0,n.scale=1,n.vX=0,n.vY=0,n.prevX=0,n.prevY=0,n.handleScroll=n.handleScroll.bind(ce(n)),n.handleDrag=n.handleDrag.bind(ce(n)),n}return ue(t,a.a.Component),oe(t,[{key:"componentDidMount",value:function(){var e=this;this.paper=Y()(this.canvas.current),this.canvas.current.addEventListener("wheel",this.handleScroll),this.canvas.current.addEventListener("drag",this.handleDrag),this.canvas.current.addEventListener("mousedown",function(t){e.prevX=t.x,e.prevY=t.y,e.mousedown=!0,e.mousedownStart=t.timeStamp}),this.canvas.current.addEventListener("mouseup",function(){e.mousedown=!1}),this.canvas.current.addEventListener("click",function(t){t.timeStamp-e.mousedownStart<500&&e.props.onSelectChange([])}),this.canvas.current.addEventListener("mousemove",this.handleDrag)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.width,r=t.height,a=t.data,i=t.selected,o=t.vertexFormatter,l=t.strokeColor;if(r===e.height&&n===e.width||this.paper.setSize(n,r),f.a.isEmpty(a)||!n||!r||r===e.height&&n===e.width&&a===e.data&&o===e.vertexFormatter||this.draw(),a===e.data||f.a.isEmpty(a)||this.resetView(),i!==e.selected){var s=!0,c=!1,u=void 0;try{for(var h,m=this.circles.entries()[Symbol.iterator]();!(s=(h=m.next()).done);s=!0){var p=te(h.value,2),v=p[0],d=p[1];-1!==i.indexOf(v)?d.attr("stroke",l):d.attr("stroke","#000")}}catch(e){c=!0,u=e}finally{try{s||null==m.return||m.return()}finally{if(c)throw u}}}if(l!==e.strokeColor&&i===e.selected){var y=!0,b=!1,g=void 0;try{for(var E,w=i[Symbol.iterator]();!(y=(E=w.next()).done);y=!0){v=E.value;this.circles[v].attr("stroke",l)}}catch(e){b=!0,g=e}finally{try{y||null==w.return||w.return()}finally{if(b)throw g}}}}},{key:"draw",value:function(){var e,t,n=this,r=this,a=this.props,i=a.height,o=a.width,l=a.data,s=a.onSelectChange,c=a.vertexFormatter,u=Math.min(o,i),h=[u/2+.05*o,u/2],m=f.a.partial(me,f.a,u,.05*o);this.circles=[],this.labels=[],this.paper.clear();var p,v=f.a.map(l.vertices,function(e){var t=te(e,2),n=t[0],r=t[1];return[n,m(r)]}),d=f.a.map(v,1),y=f.a.map(l.intersects,function(e){var t=te(e,5),n=t[0],r=t[1],a=t[2],i=t[3],o=t[4];return[n,m(r),a,i*u,f.a.map(o,f.a.unary(m))]});if(2===f.a.size(d))e=fe.apply(void 0,$(d[0]).concat($(d[1])))/2,this.paper.path("\n        M ".concat(d[0][0]," ").concat(d[0][1],"\n        A ").concat(e," ").concat(e," 0 0 1 ").concat(d[1][0]," ").concat(d[1][1],"\n        A ").concat(e," ").concat(e," 0 0 1 ").concat(d[0][0]," ").concat(d[0][1],"\n      ")),t=e;else{var b=re(p=d)||ee(p)||ne(),g=b[0],E=b.slice(1);e=(t=fe.apply(void 0,$(g).concat($(d[1]))))/(2*Math.tan(Math.PI/d.length)),this.paper.path("M ".concat(g[0]," ").concat(g[1],"\n")+f()([].concat($(E),[g])).map(function(e){return"L ".concat(e[0]," ").concat(e[1])}).join("\n"))}var w=!0,S=!1,k=void 0;try{for(var O,C=function(){var e,a,i,o=te(O.value,2),l=o[0],u=te(o[1],2),m=u[0],p=u[1],d=(a=h,[(i=p)[0]-a[0],i[1]-a[1]]),b=fe.apply(void 0,$(d).concat([0,0])),g=function(e,t){return[t[0]+e[0],t[1]+e[1]]}(me(d,(20+b)/b),h),E=(360-360/v.length*l)%360,w=(e=n.paper).text.apply(e,$(g).concat([c[m]||m.toString()])),S=w.getBBox().width;if(n.labels.push(w),E<270&&E>90?w.rotate(E-180):w.rotate(E),S>t){var k=t/S;w.scale(k,k)}w.mouseover(function(){var e=r.props.fillColor;this.attr("fill",e),f.a.forEach(y,function(t,n){-1!==t[0].indexOf(m)&&r.circles[n].attr("fill",e).toFront()})}),w.mouseout(function(){this.attr("fill","#000"),f.a.forEach(y,function(e,t){-1!==e[0].indexOf(m)&&r.circles[t].attr("fill","#fff")})}),w.click(function(e){e.stopPropagation();var t=n.props.selected,r=f()(y).map(function(e,t){if(-1!==e[0].indexOf(m))return t}).filter(f.a.negate(f.a.isUndefined)).value();e.metaKey||e.shiftKey||e.ctrlKey?"union"!==n.state.selectMode&&t.length?s(f.a.uniq(f.a.intersection(t,r))):s(f.a.uniq([].concat($(t),$(r)))):e.altKey?s(f.a.difference(t,r)):s(r)})},N=v.entries()[Symbol.iterator]();!(w=(O=N.next()).done);w=!0)C()}catch(e){S=!0,k=e}finally{try{w||null==N.return||N.return()}finally{if(S)throw k}}var x=f()(y).map(4).map(f.a.size).sum(),z=!0,j=!1,P=void 0;try{for(var T,_=function(){var e,t=te(T.value,2),a=t[0],i=t[1],o=(e=n.paper).circle.apply(e,$(i[1]).concat([i[3]]));if(n.circles.push(o),o.attr({fill:"#fff","fill-opacity":1}),o.click(function(e){e.stopPropagation();var t=n.props.selected;e.metaKey||e.shiftKey||e.ctrlKey?-1===t.indexOf(a)?s([].concat($(t),[a])):s(t.filter(function(e){return e!==a})):s([a])}),o.mouseover(function(){var e=r.props.fillColor;this.attr({fill:e,"fill-opacity":1});var t=!0,n=!1,a=void 0;try{for(var o,l=function(){var t=o.value;r.labels[f.a.findIndex(v,function(e){return e[0]===t})].attr("fill",e)},s=i[0][Symbol.iterator]();!(t=(o=s.next()).done);t=!0)l()}catch(e){n=!0,a=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw a}}}),o.mouseout(function(){o.attr({fill:"#fff","fill-opacity":1});var e=!0,t=!1,n=void 0;try{for(var a,l=function(){var e=a.value;r.labels[f.a.findIndex(v,function(t){return t[0]===e})].attr("fill","#000")},s=i[0][Symbol.iterator]();!(e=(a=s.next()).done);e=!0)l()}catch(e){t=!0,n=e}finally{try{e||null==s.return||s.return()}finally{if(t)throw n}}}),x<600){var l=!0,c=!1,u=void 0;try{for(var h,m=i[4][Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var p=h.value;n.paper.path("\n          M ".concat(i[1][0]," ").concat(i[1][1],"\n          L ").concat(p[0]," ").concat(p[1],"\n          ")).attr("arrow-end","classic")}}catch(e){c=!0,u=e}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}o.toFront()}else{var d=n.paper.set();o.mouseover(function(){o.attr("fill-opacity",1);var e=!0,t=!1,r=void 0;try{for(var a,l=i[4][Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var s=a.value,c=n.paper.path("\n            M ".concat(i[1][0]," ").concat(i[1][1],"\n            L ").concat(s[0]," ").concat(s[1],"\n            "));c.attr("arrow-end","classic"),d.push(c),o.toFront()}}catch(e){t=!0,r=e}finally{try{e||null==l.return||l.return()}finally{if(t)throw r}}}),o.mouseout(function(){o.attr("fill-opacity",0),d.remove(),d.clear()})}},D=y.entries()[Symbol.iterator]();!(z=(T=D.next()).done);z=!0)_()}catch(e){j=!0,P=e}finally{try{z||null==D.return||D.return()}finally{if(j)throw P}}}},{key:"handleScroll",value:function(e){e.preventDefault();var t=e.deltaY;t>0?this.zoomOut():t<0&&this.zoomIn()}},{key:"handleDrag",value:function(e){e.preventDefault(),this.mousedown&&(this.vX+=(this.prevX-e.x)*this.scale,this.vY+=(this.prevY-e.y)*this.scale,this.prevX=e.x,this.prevY=e.y,this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH))}},{key:"resetView",value:function(){this.scale=1,this.vX=0,this.vY=0,this.paper.setViewBox(0,0,this.vW,this.vH)}},{key:"zoomIn",value:function(){this.scale*=.95,this.scale=Math.max(this.scale,.1),this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)}},{key:"zoomOut",value:function(){this.scale*=1.05,this.scale=Math.min(this.scale,10),this.paper.setViewBox(this.vX,this.vY,this.vW,this.vH)}},{key:"setSelectMode",value:function(e){this.setState({selectMode:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.width,r=e.height,i=this.state.selectMode;return a.a.createElement("div",{style:{width:n,height:r,position:"relative"}},a.a.createElement("div",{ref:this.canvas,className:j()(t)}),a.a.createElement("div",{className:"d-flex flex-column",style:{position:"absolute",top:"10px",left:"0px"}},a.a.createElement("div",{className:"btn-group-vertical mb-2"},a.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.resetView.bind(this)},a.a.createElement(F.a,{icon:"expand",className:"mr-1"})),a.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.zoomIn.bind(this)},a.a.createElement(F.a,{icon:"search-plus",className:"mr-1"})),a.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm",onClick:this.zoomOut.bind(this)},a.a.createElement(F.a,{icon:"search-minus",className:"mr-1"}))),a.a.createElement("div",{className:"btn-group-vertical"},a.a.createElement("button",{type:"button",className:j()("btn btn-primary py-0 px-1","union"===i&&"active"),onClick:this.setSelectMode.bind(this,"union"),title:"union"},a.a.createElement(Q,{width:"32",height:"32",viewBox:"0 93 455 270",style:{fill:"#ffffff"}})),a.a.createElement("button",{type:"button",className:j()("btn btn-primary py-0 px-1","intersection"===i&&"active"),onClick:this.setSelectMode.bind(this,"intersection"),title:"intersection"},a.a.createElement(W,{width:"32",height:"32",viewBox:"0 93 455 270",style:{fill:"#ffffff"}})))))}},{key:"vW",get:function(){return this.paper.width*this.scale}},{key:"vH",get:function(){return this.paper.height*this.scale}}]),t}();pe.propTypes={className:C.a.string,width:C.a.number,height:C.a.number,data:C.a.object.isRequired,selected:C.a.array,onSelectChange:C.a.func,vertexFormatter:C.a.object,fillColor:C.a.string,strokeColor:C.a.string},pe.defaultProps={width:1280,height:800,onSelectChange:f.a.noop,vertexFormatter:{},fillColor:"#257AFD",strokeColor:"#257AFD"};var ve=function(e){function t(e){var n;return ae(this,t),(n=le(this,se(t).call(this,e))).listOuterRef=a.a.createRef(),n.state={height:0},n.setSize=f.a.throttle(n.setSize.bind(ce(n)),100),n}return ue(t,a.a.PureComponent),oe(t,[{key:"componentDidMount",value:function(){this.setSize(),window.addEventListener("resize",this.setSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setSize",value:function(){this.setState({height:document.documentElement.clientHeight-this.listOuterRef.current.getBoundingClientRect().top})}},{key:"renderItem",value:function(e){var t=e.index,n=e.style;return a.a.createElement("li",{className:"list-group-item",style:n},this.props.items[t])}},{key:"render",value:function(){return a.a.createElement(B.a,{className:this.props.className,ref:this.props.listRef,outerRef:this.listOuterRef,innerElementType:"ul",itemSize:50,height:this.state.height,itemCount:this.props.items.length},this.renderItem.bind(this))}}]),t}();ve.propTypes={items:C.a.array.isRequired,listRef:C.a.object,className:C.a.string};var de=function(e){function t(e){var n;return ae(this,t),(n=le(this,se(t).call(this,e))).searchIntersects=f.a.debounce(n.searchIntersects.bind(ce(n)),150),n}return ue(t,a.a.Component),oe(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.value;t!==e.value&&this.searchIntersects(t)}},{key:"searchIntersects",value:function(e){var t=this.props,n=t.onSelectChange,r=t.data;if(e){var a=q(e);n(f()(r.intersects).map(function(e,t){if(-1!==f.a.findIndex(e[2],function(e){return a.test(e)}))return t}).filter(f.a.negate(f.a.isUndefined)).value())}else n([])}},{key:"render",value:function(){return a.a.createElement("input",{type:"search",className:"form-control",placeholder:"Search",value:this.props.value,onChange:this.props.onChange})}}]),t}();function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e){return function(e){if(Array.isArray(e))return e}(e)||Ee(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ge(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||Ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ee(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}de.propTypes={value:C.a.string,onChange:C.a.func,selected:C.a.array,onSelectChange:C.a.func,data:C.a.object},H.b.add(G.g,G.e,G.j,G.a,G.b,G.f,G.d);var Ce=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Se(t).call(this,e))||"object"!==ye(i)&&"function"!=typeof i?ke(r):i).canvas=a.a.createRef(),n.listRef=a.a.createRef(),n.state={height:0,width:0,data:{},items:[],itemsCurr:[],itemsPast:[],itemsFuture:[],selected:[],searchTerm:"",selectColor:"#257AFD"},n.setSize=f.a.throttle(n.setSize.bind(ke(n)),100),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,a.a.Component),n=t,(r=[{key:"componentDidMount",value:function(){this.getSungear(),this.setSize(),window.addEventListener("resize",this.setSize)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.state.selected!==t.selected){var r=f()(this.state.selected).map(function(e){return n.props.data.intersects[e][2]}).flatten().sortBy().value();this.setState({items:r},function(){var e=n.state.searchTerm;if(e){var t=q(e),a=f.a.findIndex(r,function(e){return t.test(e)});-1!==a&&n.listRef.current.scrollToItem(a,"start")}})}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setSize",value:function(){var e=this.canvas.current.getBoundingClientRect(),t=e.width,n=e.top;this.setState({height:document.documentElement.clientHeight-n,width:t})}},{key:"handleSelect",value:function(e){this.setState({selected:e})}},{key:"handleSelectColor",value:function(e){this.setState({selectColor:e.target.value})}},{key:"getSungear",value:function(e){var t=this,n=this.props.query;return this.props.getSungear(n,e).then(function(){t.setState({selected:[]})})}},{key:"narrowClick",value:function(e){var t=this;if(e.preventDefault(),this.state.items.length){var n=this.state.items;this.getSungear(n).then(function(){t.setState(function(e){return{itemsPast:[].concat(ge(e.itemsPast),[e.itemsCurr]),itemsCurr:n,itemsFuture:[]}})})}}},{key:"prevClick",value:function(e){var t=this;e.preventDefault();var n=this.state.itemsPast,r=n.slice(0,n.length-1),a=n[n.length-1];this.getSungear(a).then(function(){t.setState(function(e){return{itemsCurr:a,itemsPast:r,itemsFuture:[e.itemsCurr].concat(ge(e.itemsFuture))}})})}},{key:"nextClick",value:function(e){var t=this;e.preventDefault();var n=be(this.state.itemsFuture),r=n[0],a=n.slice(1);this.getSungear(r).then(function(){t.setState(function(e){return{itemsCurr:r,itemsPast:[].concat(ge(e.itemsPast),[e.itemsCurr]),itemsFuture:a}})})}},{key:"resetClick",value:function(){var e=this;this.getSungear().then(function(){e.setState({itemsCurr:[],itemsPast:[],itemsFuture:[]})})}},{key:"inverseSelection",value:function(){var e=this.state.selected,t=this.props.data.intersects;this.setState({selected:f.a.difference(f.a.range(f.a.size(t)),e)})}},{key:"exportSvg",value:function(){try{!function(e,t){e.setAttribute("xmlns","http://www.w3.org/2000/svg");var n=e.outerHTML,r=new Blob(['<?xml version="1.0" standalone="no"?>\r\n',n],{type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(r),i=document.createElement("a");i.href=a,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}(this.canvas.current.getElementsByTagName("svg")[0],"sungear.svg")}catch(e){}}},{key:"handleSearch",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.height,n=e.width,r=e.selected,i=e.items,o=e.searchTerm,l=e.selectColor,s=this.props.data;return a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{ref:this.canvas,className:"col-8 w-100"},a.a.createElement(pe,{width:n,height:t,data:s,selected:r,onSelectChange:this.handleSelect.bind(this),strokeColor:l,fillColor:l})),a.a.createElement("div",{className:"col-4"},a.a.createElement("div",{className:"row m-1"},a.a.createElement("div",{className:"col"},a.a.createElement("div",{className:"btn-group mr-1"},a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.narrowClick.bind(this)},a.a.createElement(F.a,{icon:"filter",className:"mr-1"}),"Narrow"),a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.inverseSelection.bind(this)},a.a.createElement(F.a,{icon:"object-group",className:"mr-1"}),"Inverse"),a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.resetClick.bind(this)},a.a.createElement(F.a,{icon:"sync",className:"mr-1"}),"Reset")))),a.a.createElement("div",{className:"row m-1"},a.a.createElement("div",{className:"col"},a.a.createElement("div",{className:"d-inline mr-2"},"Views:"),a.a.createElement("div",{className:"btn-group"},a.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!this.state.itemsPast.length,onClick:this.prevClick.bind(this)},a.a.createElement(F.a,{icon:"arrow-circle-left",className:"mr-1"}),"Previous"),a.a.createElement("button",{type:"button",className:"btn btn-primary",disabled:!this.state.itemsFuture.length,onClick:this.nextClick.bind(this)},"Next",a.a.createElement(F.a,{icon:"arrow-circle-right",className:"ml-1"}))))),a.a.createElement("div",{className:"row m-1"},a.a.createElement("div",{className:"col"},a.a.createElement("div",{className:"btn-group"},a.a.createElement("a",{className:"btn btn-primary",href:"data:text/plain,"+f.a.join(this.state.items,"\n")+"\n",download:"items.txt"},a.a.createElement(F.a,{icon:"file-alt",className:"mr-1"}),"Export Items"),a.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.exportSvg.bind(this)},a.a.createElement(F.a,{icon:"image",className:"mr-1"}),"Export Image")))),a.a.createElement("div",{className:"row m-1"},a.a.createElement("div",{className:"col"},a.a.createElement("div",{className:"form-inline"},a.a.createElement("label",{className:"mr-2",htmlFor:"color"},"Selection Color:"),a.a.createElement("input",{type:"color",id:"color",className:"form-control",style:{minWidth:"50px"},value:l,onChange:this.handleSelectColor.bind(this)})))),a.a.createElement("div",{className:"row m-1"},a.a.createElement("div",{className:"col"},a.a.createElement(de,{value:o,onChange:this.handleSearch.bind(this),data:s,selected:r,onSelectChange:this.handleSelect.bind(this)}))),a.a.createElement("div",{className:"row m-1"},a.a.createElement("div",{className:"col"},a.a.createElement("p",null,i.length.toLocaleString()," items selected"),a.a.createElement(ve,{className:"list-group",items:i,listRef:this.listRef}))))))}}])&&we(n.prototype,r),i&&we(n,i),t}();Ce.propTypes={query:C.a.string,data:C.a.object,getSungear:C.a.func};var Ne=Object(s.b)(function(e){return{query:e.query,data:e.data}},{getSungear:x})(Ce);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function je(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),je(this,Pe(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,a.a.Component),n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},a.a.createElement(g.a,{to:"/",className:"navbar-brand"},"Sungear"),a.a.createElement("ul",{className:"navbar-nav mr-auto"},a.a.createElement("li",{className:"nav-item"},a.a.createElement(E.a,{exact:!0,className:"nav-link",to:"/",activeClassName:"active"},"Home")))),a.a.createElement(w.a,null,a.a.createElement(S.a,{path:"/",exact:!0,component:A}),a.a.createElement(S.a,{path:"/sungear",component:Ne}),a.a.createElement(k.a,{to:"/"})))}}])&&ze(n.prototype,r),i&&ze(n,i),t}();o.a.render(a.a.createElement(s.a,{store:b},a.a.createElement(l.a,null,a.a.createElement(_e,null))),document.getElementById("app"))}},[[33,1,2]]]);