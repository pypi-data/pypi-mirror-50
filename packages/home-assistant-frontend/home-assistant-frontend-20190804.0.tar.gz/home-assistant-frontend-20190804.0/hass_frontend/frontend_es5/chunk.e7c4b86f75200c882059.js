(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{745:function(t,e,s){"use strict";s.r(e);var n,a,i=s(89),r=s(444),o=s(443);function c(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}s.d(e,"CastManager",function(){return u}),s.d(e,"getCastManager",function(){return h});var u=function(){function t(e){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.auth=void 0,this.status=void 0,this._eventListeners={},this.auth=e;var n=this.castContext;n.setOptions({receiverApplicationId:r.a,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED}),n.addEventListener(cast.framework.CastContextEventType.SESSION_STATE_CHANGED,function(t){return s._sessionStateChanged(t)}),n.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,function(t){return s._castStateChanged(t)})}var e,s,n;return e=t,(s=[{key:"addEventListener",value:function(t,e){var s=this;return t in this._eventListeners||(this._eventListeners[t]=[]),this._eventListeners[t].push(e),function(){s._eventListeners[t].splice(s._eventListeners[t].indexOf(e))}}},{key:"sendMessage",value:function(t){this.castSession.sendMessage(r.d,t)}},{key:"requestSession",value:function(){return this.castContext.requestSession()}},{key:"_fireEvent",value:function(t){var e=!0,s=!1,n=void 0;try{for(var a,i=(this._eventListeners[t]||[])[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){(0,a.value)()}}catch(r){s=!0,n=r}finally{try{e||null==i.return||i.return()}finally{if(s)throw n}}}},{key:"_receiveMessage",value:function(t){"receiver_status"===t.type&&(this.status=t,this._fireEvent("connection-changed"))}},{key:"_sessionStateChanged",value:function(t){"SESSION_RESUMED"===t.sessionState?(this.sendMessage({type:"get_status"}),this._attachMessageListener()):"SESSION_STARTED"===t.sessionState?(this.auth?Object(o.a)(this,this.auth):this.sendMessage({type:"get_status"}),this._attachMessageListener()):"SESSION_ENDED"===t.sessionState&&(this.status=void 0,this._fireEvent("connection-changed"))}},{key:"_castStateChanged",value:function(t){this._fireEvent("state-changed")}},{key:"_attachMessageListener",value:function(){var t=this;this.castSession.addMessageListener(r.d,function(e,s){return t._receiveMessage(JSON.parse(s))})}},{key:"castConnectedToOurHass",get:function(){return void 0!==this.status&&void 0!==this.auth&&this.status.connected&&(this.status.hassUrl===this.auth.data.hassUrl||r.b&&this.status.hassUrl===r.c)}},{key:"castState",get:function(){return this.castContext.getCastState()}},{key:"castContext",get:function(){return cast.framework.CastContext.getInstance()}},{key:"castSession",get:function(){return this.castContext.getCurrentSession()}}])&&c(e.prototype,s),n&&c(e,n),t}(),h=function(t){return a||(a=function(){if(n)return n;n=new Promise(function(t){window.__onGCastApiAvailable=t});var t=document.createElement("div");return t.id="cast",document.body.append(t),Object(i.b)("https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"),n}().then(function(e){if(!e)throw new Error("No Cast API available");return new u(t)})),a}}}]);
//# sourceMappingURL=chunk.e7c4b86f75200c882059.js.map