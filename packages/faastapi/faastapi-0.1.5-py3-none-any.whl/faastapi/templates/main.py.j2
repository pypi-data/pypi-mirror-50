"""
This template can be used to generate a Python file defining a FastAPI server
"""
from fastapi import Body
from faastapi import FaastAPI, get_context
from models import Output
from handler import handle


app = FaastAPI()

app.configure()


@app.post("/", dependencies=[app.get_user], response_model=Output)
async def post(
    message: str = Body(default="Hello world!", embed=True),
    context=get_context
):
    _resp = handle(context, message)
    return _resp


@app.get("/", dependencies=[app.get_user], response_model=Output)
async def get(
    message: str = "Hello !",
    context=get_context
):
    _resp = handle(context, message)
    return _resp

