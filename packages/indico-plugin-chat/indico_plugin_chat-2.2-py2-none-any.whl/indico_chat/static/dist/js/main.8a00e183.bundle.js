!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/static/plugins/chat/dist/",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);o(1);!function(e){const t=$T.domain("chat");e.eventManageChat=function(){$(".toggle-details").on("click",function(e){e.preventDefault();const t=$(this);t.closest("tr").next("tr").find(".details-container").slideToggle({start(){t.toggleClass("icon-next icon-expand")}})}),$(".js-chat-remove-room").on("click",function(e){e.preventDefault();const o=$(this);let n=t.gettext("Do you really want to remove this chatroom from the event?");1==o.data("numEvents")&&(n+="<br>",o.data("customServer")?n+=t.gettext("Since it is on an external server, it will not be deleted on that server."):n+=t.gettext("Since it is only used in this event, it will be deleted from the Jabber server, too!")),confirmPrompt(n,t.gettext("Delete this chatroom?")).then(function(){const e=$("<form>",{action:o.data("href"),method:"post"}),t=$("<input>",{type:"hidden",name:"csrf_token",value:$("#csrf-token").attr("content")});e.append(t).appendTo("body").submit()})}),$(".js-chat-refresh-room").on("click",function(e){e.preventDefault(),$.ajax({url:$(this).data("href"),type:"POST",dataType:"json",complete:IndicoUI.Dialogs.Util.progress(),success(e){handleAjaxError(e)||("not-found"==e.result?new AlertPopup(t.gettext("Chatroom not found"),t.gettext("The chatroom does not exist on the Jabber server anymore. We recommend you to delete it chatroom from Indico as well.")).open():"changed"==e.result&&new AlertPopup(t.gettext("Chatroom updated"),t.gettext("The chatroom data has been updated."),function(){window.location.href=window.location.href}).open())}})})},e.eventManageChatLogs=function(){const e=$("#chat-log-display-container"),o=$("#chat-log-display"),n=$("#chat-log-material");let a,r;$("#chat-log-form").ajaxForm({dataType:"json",beforeSubmit(){e.hide(),n.hide(),a=IndicoUI.Dialogs.Util.progress()},error:handleAjaxError,success(a){if(handleAjaxError(a))return;if(!a.success)return void new AlertPopup(t.gettext("No logs available"),a.msg).open();const i=o[0].contentWindow.document;i.write(a.html),i.close(),r=a.params,$("#chat-log-material").find("input, button").prop("disabled",!1),e.show(),n.show()},complete(){a()}}),$("#chat-create-material").on("click",function(e){e.preventDefault();const o=$(this),n=$("#chat-material-name").val().trim();if(!n)return;const a=$.extend({},r,{material_name:n});$.ajax({url:o.data("href"),type:"POST",data:a,dataType:"json",error:handleAjaxError,complete:IndicoUI.Dialogs.Util.progress(),success(e){handleAjaxError(e)||(e.success?($("#chat-log-material").find("input, button").prop("disabled",!0).blur(),new AlertPopup(t.gettext("Material created"),t.gettext("The chat logs have been attached to the event.")).open()):new AlertPopup(t.gettext("Could not create material"),e.msg).open())}})});const i=$("#chat-log-range");i.daterange({allowPast:!0,fieldNames:["start_date","end_date"],startDate:i.data("startDate"),endDate:i.data("endDate"),pickerOptions:{yearRange:"c-1:c+1"}})}}(window)},function(e,t,o){}]);
//# sourceMappingURL=main.8a00e183.bundle.js.map