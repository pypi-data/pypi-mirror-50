<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &#8212; MEGARA Data Reduction Pipeline 0.6.dev1 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.6.dev1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="MEGARA Data Reduction Pipeline 0.6.dev1 documentation" href="index.html" />
    <link rel="next" title="Testing" href="testing.html" />
    <link rel="prev" title="Overview" href="intro.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="testing.html" title="Testing"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Overview"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MEGARA Data Reduction Pipeline 0.6.dev1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The MEGARA Pipeline package requires the following packages installed in order to
be able to be installed and work properly:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://www.python.org">python 2.7</a></li>
<li><a class="reference external" href="http://peak.telecommunity.com/DevCenter/setuptools">setuptools</a></li>
<li><a class="reference external" href="http://www.numpy.org/">numpy</a> &gt;= 1.7</li>
<li><a class="reference external" href="http://www.scipy.org/">scipy</a></li>
<li><a class="reference external" href="http://www.astropy.org/">astropy</a> &gt;= 1.0</li>
<li><a class="reference external" href="https://pypi.python.org/pypi/numina/">numina</a> &gt;= 0.13</li>
<li><a class="reference external" href="http://scikit-image.org/">scikit-image</a></li>
</ul>
</div></blockquote>
<p>Additional packages are optionally required:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="http://pytest.org">py.test</a> &gt;= 2.5 to run the tests</li>
<li><a class="reference external" href="http://sphinx.pocoo.org">sphinx</a> to build the documentation</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="installing-megara-drp">
<h2>Installing MEGARA DRP<a class="headerlink" href="#installing-megara-drp" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-conda">
<h3>Using Conda<a class="headerlink" href="#using-conda" title="Permalink to this headline">¶</a></h3>
<p>TBD</p>
</div>
<div class="section" id="using-pip">
<h3>Using pip<a class="headerlink" href="#using-pip" title="Permalink to this headline">¶</a></h3>
<p>To install with pip, simply run::</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">deps</span> <span class="n">megaradrp</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">--no-deps</span></code> flag is optional, but highly recommended if you already
have Numpy installed, since otherwise pip will sometimes try to upgrade
your Numpy installation, which may not always be desired.</p>
</div>
<p>MEGARA DRP is registered in the Python Package Index. That means (among
other things) that can be installed inside the environment with one command.</p>
<blockquote>
<div>(myenv) $ pip install megaradrp</div></blockquote>
<p>The requirements of megaradrp will be downloaded and installed inside
the virtual environment. Once the installation is finished, you can check
by listing the installed recipes with the command line interface tool <code class="docutils literal"><span class="pre">numina</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>(myenv) $ ./bin/numina show-instruments
INFO: Numina simple recipe runner version 0.13.0
Instrument: MEGARA
 has configuration &#39;default&#39;
 has pipeline &#39;default&#39;, version 1
 has pipeline &#39;experimental&#39;, version 1
</pre></div>
</div>
</div>
<div class="section" id="building-from-source">
<h3>Building from source<a class="headerlink" href="#building-from-source" title="Permalink to this headline">¶</a></h3>
<p>The latest stable version of MEGARA DRP can be downloaded from
<a class="reference external" href="https://pypi.python.org/pypi/megaradrp">https://pypi.python.org/pypi/megaradrp</a></p>
<p>To install MEGARA DRP, use the standard installation procedure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ tar zxvf megaradrp-X.Y.Z.tar.gz
$ cd megaradrp-X.Y.Z
$ python setup.py install
</pre></div>
</div>
<p>The <cite>install</cite> command provides options to change the target directory. By
default installation requires administrative privileges. The different
installation options can be checked with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python setup.py install --help
</pre></div>
</div>
<div class="section" id="development-version">
<h4>Development version<a class="headerlink" href="#development-version" title="Permalink to this headline">¶</a></h4>
<p>The development version can be checked out with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ git clone https://github.com/guaix-ucm/megaradrp.git
</pre></div>
</div>
<p>And then installed following the standard procedure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd megaradrp
$ python setup.py install
</pre></div>
</div>
</div>
<div class="section" id="building-the-documentation">
<h4>Building the documentation<a class="headerlink" href="#building-the-documentation" title="Permalink to this headline">¶</a></h4>
<p>The MEGARA DRP documentation is base on <a class="reference external" href="http://sphinx.pocoo.org">sphinx</a>. With the package
installed, the html documentation can be built from the <cite>doc</cite> directory:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd doc
$ make html
</pre></div>
</div>
<p>The documentation will be copied to a directory under <cite>build/sphinx</cite>.</p>
<p>The documentation can be built in different formats. The complete list will appear
if you type <cite>make</cite></p>
</div>
</div>
<div class="section" id="deployment-with-virtualenv">
<h3>Deployment with Virtualenv<a class="headerlink" href="#deployment-with-virtualenv" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://pypi.python.org/pypi/virtualenv">Virtualenv</a> is a tool to build isolated Python environments.</p>
<p>It&#8217;s a great way to quickly test new libraries without cluttering your
global site-packages or run multiple projects on the same machine which
depend on a particular library but not the same version of the library.</p>
<div class="section" id="install-virtualenv">
<h4>Install virtualenv<a class="headerlink" href="#install-virtualenv" title="Permalink to this headline">¶</a></h4>
<p>I install it with the package system of my OS, so that it ends in my
global site-packages.</p>
<p>With Fedora/EL is just:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo yum install python-virtualenv
</pre></div>
</div>
</div>
<div class="section" id="create-virtual-environment">
<h4>Create virtual environment<a class="headerlink" href="#create-virtual-environment" title="Permalink to this headline">¶</a></h4>
<p>Create the virtual environment enabling the packages already installed
in the global site-packages via the OS package system. Some requirements
(in particullar numpy and scipy) are difficult to build: they require
compiling and external C and FORTRAN libraries to be installed.</p>
<p>So the command is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ virtualenv --system-site-packages myenv
</pre></div>
</div>
<p>If you need to create the virtualenv without global packages, drop the
system-site-packages flag.</p>
</div>
<div class="section" id="activate-the-environment">
<h4>Activate the environment<a class="headerlink" href="#activate-the-environment" title="Permalink to this headline">¶</a></h4>
<p>Once the environment is created, you need to activate it. Just change
directory into it and load with your command line interpreter the
script bin/activate.</p>
<p>With bash:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd myenv
$ . bin/activate
(myenv) $
</pre></div>
</div>
<p>With csh/tcsh:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd myenv
$ source bin/activate
(myenv) $
</pre></div>
</div>
<p>Notice that the prompt changes once you are activate the environment. To
deactivate it just type deactivate:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>(myenv) $ deactivate
$
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="installing-megara-dfp">
<h2>Installing MEGARA DFP<a class="headerlink" href="#installing-megara-dfp" title="Permalink to this headline">¶</a></h2>
<p>This section described how to install the MEGARA Pipeline inside
the GTC Control system.</p>
<p>In the following we assume that we are installing with user <cite>gcsop</cite>.</p>
<p>Login in the <cite>gcsop</cite> account and activate the GTC environment:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ /opt/gcs/tools/nrp -p linux -s bash
</pre></div>
</div>
<p>Change working directory to <code class="docutils literal"><span class="pre">/work/gcsop/src_python/gtc</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd /work/gcsop/src_python/gtc
$ ls
AL  DSL  SSL
</pre></div>
</div>
<p>We have to install <cite>numina</cite> under <cite>DSL</cite> and <cite>megaradrp</cite> under <cite>AL</cite>.</p>
<p>Please refer to <a class="reference external" href="http://numina.readthedocs.io/en/latest/user/solaris.html#solaris10" title="(in Numina v0.15)"><span class="xref std std-ref">Numina manual</span></a> to install Numina
and its dependences under Solaris 10.</p>
<div class="section" id="install-numina">
<h3>Install numina<a class="headerlink" href="#install-numina" title="Permalink to this headline">¶</a></h3>
<p>First, install all the dependencies:</p>
<blockquote>
<div><ul class="simple">
<li>setuptools</li>
<li>six</li>
<li>numpy &gt;= 1.7</li>
<li>scipy</li>
<li>astropy &gt;= 1.0</li>
<li>PyYaml</li>
<li>singledispatch</li>
</ul>
</div></blockquote>
<p>If you are installing a development version, Cython is also required.</p>
<p>Most are available as precompiled packages in Linux.
Please refer to <a class="reference external" href="http://numina.readthedocs.io/en/latest/user/solaris.html#solaris10" title="(in Numina v0.15)"><span class="xref std std-ref">Numina manual</span></a> to install Numina
and its dependences under Solaris 10.</p>
<p>Then, download the source code, either from PyPI or github:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pwd
/work/gcsop/src_python/gtc/DSL/
$ git clone https://github.com/guaix-ucm/numina.git
$ cd numina
</pre></div>
</div>
<p>Create a file <cite>numina.mod</cite> with the following content:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">NAME</span><span class="o">=</span><span class="n">numina</span>
<span class="n">TYPE</span><span class="o">=</span><span class="n">device</span>

<span class="n">l</span><span class="p">:</span><span class="n">numina</span><span class="p">:</span><span class="n">python</span><span class="p">:</span><span class="n">y</span>
</pre></div>
</div>
<p>And then build and install using <cite>nmk</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ nmk -t module.rebuild
$ nmk -t module.install
</pre></div>
</div>
</div>
<div class="section" id="install-megaradrp">
<h3>Install megaradrp<a class="headerlink" href="#install-megaradrp" title="Permalink to this headline">¶</a></h3>
<p>Change directory to <cite>/work/gcsop/src_python/gtc/AL/</cite> and download the source code
of <cite>megaradrp</cite>, either from <a class="reference external" href="https://pypi.python.org/pypi/megaradrp">PyPI</a>
or from <a class="reference external" href="https://github.com/guaix-ucm/megaradrp">github</a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pwd
/work/gcsop/src_python/gtc/AL/
$ git clone https://github.com/guaix-ucm/megaradrp.git
$ cd megaradrp
</pre></div>
</div>
<p>Create a file <cite>megaradrp.mod</cite> with the following content:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">NAME</span><span class="o">=</span><span class="n">megaradrp</span>
<span class="n">TYPE</span><span class="o">=</span><span class="n">device</span>

<span class="n">l</span><span class="p">:</span><span class="n">megaradrp</span><span class="p">:</span><span class="n">python</span><span class="p">:</span><span class="n">y</span>
</pre></div>
</div>
<p>And then build and install using <cite>nmk</cite>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ nmk -t module.rebuild
$ nmk -t module.install
</pre></div>
</div>
<p>You can check that everything works by running the <cite>numina</cite> command line tool:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ numina show-instruments
Instrument: MEGARA
 has configuration &#39;default&#39;
 has pipeline &#39;default&#39;, version 1
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#installing-megara-drp">Installing MEGARA DRP</a><ul>
<li><a class="reference internal" href="#using-conda">Using Conda</a></li>
<li><a class="reference internal" href="#using-pip">Using pip</a></li>
<li><a class="reference internal" href="#building-from-source">Building from source</a><ul>
<li><a class="reference internal" href="#development-version">Development version</a></li>
<li><a class="reference internal" href="#building-the-documentation">Building the documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deployment-with-virtualenv">Deployment with Virtualenv</a><ul>
<li><a class="reference internal" href="#install-virtualenv">Install virtualenv</a></li>
<li><a class="reference internal" href="#create-virtual-environment">Create virtual environment</a></li>
<li><a class="reference internal" href="#activate-the-environment">Activate the environment</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#installing-megara-dfp">Installing MEGARA DFP</a><ul>
<li><a class="reference internal" href="#install-numina">Install numina</a></li>
<li><a class="reference internal" href="#install-megaradrp">Install megaradrp</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Overview</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="testing.html"
                        title="next chapter">Testing</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="testing.html" title="Testing"
             >next</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Overview"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">MEGARA Data Reduction Pipeline 0.6.dev1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013-2017, Universidad Complutense de Madrid.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.8.
    </div>
  </body>
</html>