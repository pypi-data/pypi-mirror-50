(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{4695:function(t,e,r){"use strict";r.d(e,"b",function(){return f}),r.d(e,"a",function(){return s}),r.d(e,"c",function(){return y});var n=r(5804),o=r(4713),i=r(4696);function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=.25,l={LAT_MIN:-90,LAT_MAX:90,LNG_MIN:-180,LNG_MAX:180};function p(t){var e=o.extent(t,function(t){return t[1]}),r=o.extent(t,function(t){return t[0]}),n=e[0]===e[1]?function(t){return[t[0]-a<l.LAT_MIN?l.LAT_MIN:t[0]-a,t[1]+a>l.LAT_MAX?l.LAT_MAX:t[1]+a]}(e):e,i=r[0]===r[1]?function(t){return[t[0]-a<l.LNG_MIN?l.LNG_MIN:t[0]-a,t[1]+a>l.LNG_MAX?l.LNG_MAX:t[1]+a]}(r):r;return[[i[0],n[0]],[i[1],n[1]]]}function f(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{var o=p(e);return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?c(r,!0).forEach(function(e){u(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t,{},Object(n.a)({height:t.height,width:t.width,padding:r,bounds:o}))}catch(e){return console.error("Could not auto zoom",e),t}}function s(t,e,r,n){var o,c,u=t,a=r;return u.js_tooltip&&(a=Object(i.a)(u.js_tooltip)),a&&(o=function(t){t.picked?e({content:a(t),x:t.x,y:t.y+30}):e(null)}),u.js_onclick_href?c=function(t){var e=Object(i.a)(u.js_onclick_href)(t);window.open(e)}:u.table_filter&&void 0!==n&&(c=function(t){return n(t.object[u.line_column])}),{onClick:c,onHover:o,pickable:Boolean(o)}}var b={p1:.01,p5:.05,p95:.95,p99:.99};function y(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sum",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"count"===e?function(t){return t.length}:(t=e in b?function(t,n){var i;return i=r?t.sort(function(t,e){return o.ascending(r(t),r(e))}):t.sort(o.ascending),o.quantile(i,b[e],n)}:o[e],r?function(e){return t(e.map(r))}:function(e){return t(e)})}},4696:function(t,e,r){"use strict";r.d(e,"a",function(){return s});var n=r(4754),o=r.n(n),i=r(4755),c=r.n(i),u=r(4713),a=r(4697);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f={console:console,_:c.a,colors:a,d3array:u};function s(t,e,r){var n={},i="SAFE_EVAL_"+Math.floor(1e6*Math.random());n[i]={};var c=i+"="+t,u=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(r,!0).forEach(function(e){p(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},f,{},e);Object.keys(u).forEach(function(t){n[t]=u[t]});try{return o.a.runInNewContext(c,n,r),n[i]}catch(t){return function(){return t}}}},4697:function(t,e,r){"use strict";r.r(e),r.d(e,"hexToRGB",function(){return o});var n=r(4758);function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;if(!t)return[0,0,0,e];var r=Object(n.a)(t);return[r.r,r.g,r.b,e]}},4702:function(t,e,r){"use strict";r.d(e,"a",function(){return m});var n=r(375),o=r.n(n),i=r(0),c=r.n(i),u=r(2),a=r.n(u),l=r(4757),p=r(4703);r(4756),r(4718);function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(r,!0).forEach(function(e){v(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var j=2e3,g={viewport:a.a.object.isRequired,layers:a.a.array.isRequired,setControlValue:a.a.func,mapStyle:a.a.string,mapboxApiAccessToken:a.a.string.isRequired,onViewportChange:a.a.func},m=function(t){function e(t){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,(r=!(o=h(e).call(this,t))||"object"!==f(o)&&"function"!=typeof o?d(n):o).tick=r.tick.bind(d(r)),r.onViewportChange=r.onViewportChange.bind(d(r)),r.state={previousViewport:t.viewport,timer:setInterval(r.tick,j)},r}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(e,c.a.Component),r=e,i=[{key:"getDerivedStateFromProps",value:function(t,e){return t.viewport!==e.viewport?{viewport:y({},t.viewport),previousViewport:e.viewport}:null}}],(n=[{key:"componentWillUnmount",value:function(){clearInterval(this.state.timer)}},{key:"onViewportChange",value:function(t){var e=Object.assign({},t),r=y({},this.state.previousViewport,{},e);this.props.onViewportChange(r)}},{key:"tick",value:function(){var t=this;if(this.state&&!o()(this.state.previousViewport,this.props.viewport)){var e=this.props.setControlValue,r=this.props.viewport;e&&e("viewport",r),this.setState(function(){return{previousViewport:t.props.viewport}})}}},{key:"layers",value:function(){return this.props.layers.some(function(t){return"function"==typeof t})?this.props.layers.map(function(t){return"function"==typeof t?t():t}):this.props.layers}},{key:"render",value:function(){var t=this.props.viewport;return c.a.createElement(l.a,s({},t,{mapStyle:this.props.mapStyle,onViewportChange:this.onViewportChange,mapboxApiAccessToken:this.props.mapboxApiAccessToken}),c.a.createElement(p.i,s({},t,{layers:this.layers(),initWebGLParameters:!0})))}}])&&O(r.prototype,n),i&&O(r,i),e}();m.propTypes=g,m.defaultProps={mapStyle:"light",onViewportChange:function(){},setControlValue:function(){}}},4707:function(t,e,r){"use strict";r.d(e,"a",function(){return b});var n=r(0),o=r.n(n),i=r(2),c=r.n(i);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var s={label:c.a.string.isRequired,value:c.a.string.isRequired},b=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,p(e).apply(this,arguments))}var r,n,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,o.a.PureComponent),r=e,(n=[{key:"render",value:function(){return o.a.createElement("div",null,this.props.label,o.a.createElement("strong",null,this.props.value))}}])&&a(r.prototype,n),i&&a(r,i),e}();b.propTypes=s},4718:function(t,e,r){},4737:function(t,e){},4738:function(t,e){},4739:function(t,e){},4740:function(t,e){},4743:function(t,e){},4744:function(t,e){},4745:function(t,e){},4746:function(t,e){},4747:function(t,e){},4748:function(t,e){},4749:function(t,e){},4750:function(t,e){},4751:function(t,e){},4752:function(t,e){},4753:function(t,e){},4923:function(t,e,r){"use strict";r.r(e),r.d(e,"getLayer",function(){return g});var n=r(0),o=r.n(n),i=r(2),c=r.n(i),u=r(4703),a=r(4702),l=r(4697),p=r(4696),f=r(4695),s=r(4707);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(r,!0).forEach(function(e){v(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var O,h={fillColor:"fillColor",color:"fillColor",fill:"fillColor","fill-color":"fillColor",strokeColor:"strokeColor","stroke-color":"strokeColor","stroke-width":"strokeWidth"},d=function(t,e){var r={};return Object.keys(t).forEach(function(e){e in h?r[h[e]]=t[e]:r[e]=t[e]}),"string"==typeof t.fillColor&&(r.fillColor=Object(l.hexToRGB)(t.fillColor)),"string"==typeof t.strokeColor&&(r.strokeColor=Object(l.hexToRGB)(t.strokeColor)),y({},r,{},e)},w=function t(e,r,n){if(e&&e.features&&e.features.forEach(function(o){t(o,r,e.extraProps||n)}),e&&e.geometry){var o=y({},e,{properties:d(e.properties,r)});o.extraProps||(o.extraProps=n),O.push(o)}};function j(t){return t.object.extraProps&&o.a.createElement("div",{className:"deckgl-tooltip"},Object.keys(t.object.extraProps).map(function(e,r){return o.a.createElement(s.a,{key:"prop-".concat(r),label:"".concat(e,": "),value:"".concat(t.object.extraProps[e])})}))}function g(t,e,r,n){var o,i=t,c=i.fill_color_picker,a=i.stroke_color_picker,l=[c.r,c.g,c.b,255*c.a],s=[a.r,a.g,a.b,255*a.a],b={};return l[3]>0&&(b.fillColor=l),s[3]>0&&(b.strokeColor=s),O=[],w(e.data,b),i.js_data_mutator&&(o=Object(p.a)(i.js_data_mutator),O=o(O)),new u.b(y({id:"geojson-layer-".concat(i.slice_id),filled:i.filled,data:O,stroked:i.stroked,extruded:i.extruded,pointRadiusScale:i.point_radius_scale},Object(f.a)(i,n,j)))}var m={formData:c.a.object.isRequired,payload:c.a.object.isRequired,setControlValue:c.a.func.isRequired,viewport:c.a.object.isRequired,onAddFilter:c.a.func,setTooltip:c.a.func};function P(t){var e=t.formData,r=t.payload,n=t.setControlValue,i=(t.onAddFilter,t.setTooltip),c=t.viewport,u=g(e,r,0,i);return o.a.createElement(a.a,{mapboxApiAccessToken:r.data.mapboxApiKey,viewport:c,layers:[u],mapStyle:e.mapbox_style,setControlValue:n})}P.propTypes=m,P.defaultProps={onAddFilter:function(){},setTooltip:function(){}},e.default=P}}]);